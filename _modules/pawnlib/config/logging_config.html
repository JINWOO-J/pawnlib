

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pawnlib.config.logging_config &mdash; Pawnlib v2.1.36</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />

  
      <script src="../../../_static/jquery.js"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
      <script src="../../../_static/doctools.js"></script>
      <script src="../../../_static/sphinx_highlight.js"></script>
      <script src="../../../_static/clipboard.min.js"></script>
      <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            pawnlib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Welcome to pawnlib’s documentation!</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Packages</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.asyncio.html">pawnlib.asyncio package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.builder.html">pawnlib.builder package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.cli.html">pawnlib.cli package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.config.html">pawnlib.config package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.docker.html">pawnlib.docker package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.exceptions.html">pawnlib.exceptions package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.input.html">pawnlib.input package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.metrics.html">pawnlib.metrics package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.output.html">pawnlib.output package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.resource.html">pawnlib.resource package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.typing.html">pawnlib.typing package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module/pawnlib.utils.html">pawnlib.utils package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">pawnlib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">pawnlib.config.logging_config</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pawnlib.config.logging_config</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">logging.handlers</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimedRotatingFileHandler</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pawnlib.config.globalconfig</span><span class="w"> </span><span class="kn">import</span> <span class="n">pawnlib_config</span><span class="p">,</span> <span class="n">pawn</span><span class="p">,</span> <span class="n">Null</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pawnlib.typing.constants</span><span class="w"> </span><span class="kn">import</span> <span class="n">const</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rich.console</span><span class="w"> </span><span class="kn">import</span> <span class="n">Console</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rich.traceback</span><span class="w"> </span><span class="kn">import</span> <span class="n">Traceback</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">contextlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">contextmanager</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">typing_extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span>

<span class="n">TRACE</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">NO_LOG</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">logging</span><span class="o">.</span><span class="n">addLevelName</span><span class="p">(</span><span class="n">TRACE</span><span class="p">,</span> <span class="s2">&quot;TRACE&quot;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">addLevelName</span><span class="p">(</span><span class="n">NO_LOG</span><span class="p">,</span> <span class="s2">&quot;NO_LOG&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="trace"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.trace">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">TRACE</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">TRACE</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">trace</span> <span class="o">=</span> <span class="n">trace</span>


<span class="k">def</span><span class="w"> </span><span class="nf">verbose_to_log_level</span><span class="p">(</span>
        <span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">log_levels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">clamp</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a numeric verbose value to a corresponding logging level.</span>

<span class="sd">    By default:</span>
<span class="sd">    - verbose &lt; 0 =&gt; CRITICAL+1 (즉, 어떤 로그도 표시되지 않음)</span>
<span class="sd">    - verbose=0 =&gt; WARNING</span>
<span class="sd">    - verbose=1 =&gt; INFO</span>
<span class="sd">    - verbose=2 =&gt; DEBUG</span>
<span class="sd">    - verbose&gt;=3 =&gt; TRACE (기본 정의된 커스텀 레벨, 5)</span>

<span class="sd">    If `log_levels` is provided, it must be a dict mapping verbose -&gt; logging level.</span>
<span class="sd">    If `clamp=True`, out-of-range verbose values are clamped to min/max keys in `log_levels`.</span>

<span class="sd">    :param verbose: Verbosity level (정수)</span>
<span class="sd">    :type verbose: int</span>
<span class="sd">    :param log_levels: (선택) 사용자 정의 맵핑 { verbose_value: logging_level }</span>
<span class="sd">    :type log_levels: dict or None</span>
<span class="sd">    :param clamp: True이면, verbose가 log_levels 범위를 벗어날 때 최소/최대 값에 맞춤</span>
<span class="sd">    :type clamp: bool</span>
<span class="sd">    :return: 로그 레벨 (ex: logging.DEBUG = 10)</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    :raises ValueError: log_levels가 유효하지 않을 때</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">log_levels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># 기본 맵핑 (negative =&gt; CRITICAL+1, 0=&gt;WARNING, 1=&gt;INFO, 2=&gt;DEBUG, 3=&gt;TRACE, ...)</span>
        <span class="c1"># 음수 키를 포함한 예시</span>
        <span class="n">log_levels</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># 어떤 로그도 찍히지 않게 하는 수준</span>
            <span class="mi">0</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
            <span class="mi">2</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
            <span class="mi">3</span><span class="p">:</span> <span class="n">TRACE</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">log_levels</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">log_levels</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;log_levels must be a non-empty dictionary.&quot;</span><span class="p">)</span>

    <span class="c1"># 모든 key를 정렬해서 min/max를 구함</span>
    <span class="n">sorted_keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">log_levels</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">min_key</span><span class="p">,</span> <span class="n">max_key</span> <span class="o">=</span> <span class="n">sorted_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sorted_keys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># clamp=True면, verbose가 min_key보다 작으면 min_key로, max_key보다 크면 max_key로</span>
    <span class="k">if</span> <span class="n">clamp</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">verbose</span> <span class="o">&lt;</span> <span class="n">min_key</span><span class="p">:</span>
            <span class="n">verbose</span> <span class="o">=</span> <span class="n">min_key</span>
        <span class="k">elif</span> <span class="n">verbose</span> <span class="o">&gt;</span> <span class="n">max_key</span><span class="p">:</span>
            <span class="n">verbose</span> <span class="o">=</span> <span class="n">max_key</span>

    <span class="c1"># 만약 clamp=False라면, 범위 밖인 verbose에 대한 처리 로직(디폴트값?)을 직접 정의하거나,</span>
    <span class="c1"># 여기서 ValueError를 던질 수도 있음. 아래는 예시로 min_key, max_key로 clamp.</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">min_key</span> <span class="o">&lt;=</span> <span class="n">verbose</span> <span class="o">&lt;=</span> <span class="n">max_key</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Verbose out of range [</span><span class="si">{</span><span class="n">min_key</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">max_key</span><span class="si">}</span><span class="s2">]: </span><span class="si">{</span><span class="n">verbose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># 최종적으로 log_levels에서 매핑된 값을 얻어옴</span>
    <span class="c1"># 혹시 verbose가 정확히 매핑되지 않았다면, 바로 이전/이후 key로 매핑하는 등의 추가 로직 가능</span>
    <span class="c1"># 여기서는 단순히 dict.get() 사용</span>
    <span class="k">if</span> <span class="n">verbose</span> <span class="ow">in</span> <span class="n">log_levels</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">log_levels</span><span class="p">[</span><span class="n">verbose</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># 만약 clamp 됐는데 exact key 매핑이 없으면, 가장 근접한 key를 찾는 로직을 추가해도 됨</span>
        <span class="c1"># 여기서는 안전하게 min_key로 fallback</span>
        <span class="k">return</span> <span class="n">log_levels</span><span class="p">[</span><span class="n">min_key</span><span class="p">]</span>


<div class="viewcode-block" id="verbose_to_log_level"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.verbose_to_log_level">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">verbose_to_log_level</span><span class="p">(</span>
        <span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">log_levels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">clamp</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a numeric verbose value to a corresponding logging level.</span>

<span class="sd">    기본 맵핑 (예시):</span>
<span class="sd">      0 -&gt; CRITICAL+1  (아무 로그도 출력되지 않게)</span>
<span class="sd">      1 -&gt; WARNING</span>
<span class="sd">      2 -&gt; INFO</span>
<span class="sd">      3 -&gt; DEBUG</span>
<span class="sd">      4 -&gt; TRACE</span>
<span class="sd">    그 이상(&gt;4)일 때도 4와 같은 취급 (clamp=True일 때)</span>

<span class="sd">    :param verbose: Verbosity level (정수)</span>
<span class="sd">    :param log_levels: 사용자 지정 맵핑 {verbose: logging_level}</span>
<span class="sd">                       None이면 아래 default 사용.</span>
<span class="sd">    :param clamp: 범위를 벗어난 verbose 값이 들어오면 min/max로 clamp할지 여부</span>
<span class="sd">    :return: 대응되는 파이썬 로깅 레벨 수치</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">log_levels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># &quot;0이면 로그를 전혀 남기지 않는다.&quot; → CRITICAL+1</span>
        <span class="c1"># log_levels = {</span>
        <span class="c1">#     0: NO_LOG,  # effectively no logs</span>
        <span class="c1">#     1: logging.WARNING,</span>
        <span class="c1">#     2: logging.INFO,</span>
        <span class="c1">#     3: logging.DEBUG,</span>
        <span class="c1">#     4: TRACE,                # 커스텀 TRACE level</span>
        <span class="c1"># }</span>

        <span class="n">log_levels</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="n">NO_LOG</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
            <span class="mi">2</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
            <span class="mi">3</span><span class="p">:</span> <span class="n">TRACE</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">log_levels</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">log_levels</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;log_levels must be a non-empty dictionary.&quot;</span><span class="p">)</span>

    <span class="n">sorted_keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">log_levels</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">min_key</span><span class="p">,</span> <span class="n">max_key</span> <span class="o">=</span> <span class="n">sorted_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sorted_keys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># clamp=True → 범위 밖 verbose는 min_key, max_key로 보정</span>
    <span class="k">if</span> <span class="n">clamp</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">verbose</span> <span class="o">&lt;</span> <span class="n">min_key</span><span class="p">:</span>
            <span class="n">verbose</span> <span class="o">=</span> <span class="n">min_key</span>
        <span class="k">elif</span> <span class="n">verbose</span> <span class="o">&gt;</span> <span class="n">max_key</span><span class="p">:</span>
            <span class="n">verbose</span> <span class="o">=</span> <span class="n">max_key</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># clamp=False → 범위 벗어나면 예외 발생</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">min_key</span> <span class="o">&lt;=</span> <span class="n">verbose</span> <span class="o">&lt;=</span> <span class="n">max_key</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Verbose out of range [</span><span class="si">{</span><span class="n">min_key</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">max_key</span><span class="si">}</span><span class="s2">]: </span><span class="si">{</span><span class="n">verbose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">log_levels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">verbose</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># fallback</span></div>


<span class="n">LOG_LEVEL_SHORT</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;DEBUG&quot;</span><span class="p">:</span> <span class="s2">&quot;DBG&quot;</span><span class="p">,</span>
    <span class="s2">&quot;INFO&quot;</span><span class="p">:</span> <span class="s2">&quot;INF&quot;</span><span class="p">,</span>
    <span class="s2">&quot;WARNING&quot;</span><span class="p">:</span> <span class="s2">&quot;WRN&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ERROR&quot;</span><span class="p">:</span> <span class="s2">&quot;ERR&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CRITICAL&quot;</span><span class="p">:</span> <span class="s2">&quot;CRT&quot;</span><span class="p">,</span>
    <span class="s2">&quot;TRACE&quot;</span><span class="p">:</span> <span class="s2">&quot;TRA&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">VALID_RICH_TAGS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;magenta&#39;</span><span class="p">,</span> <span class="s1">&#39;cyan&#39;</span><span class="p">,</span> <span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bright_red&#39;</span><span class="p">,</span> <span class="s1">&#39;bright_green&#39;</span><span class="p">,</span> <span class="s1">&#39;bright_blue&#39;</span><span class="p">,</span> <span class="s1">&#39;bright_yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;bright_magenta&#39;</span><span class="p">,</span> <span class="s1">&#39;bright_cyan&#39;</span><span class="p">,</span> <span class="s1">&#39;bright_white&#39;</span><span class="p">,</span> <span class="s1">&#39;bright_black&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="s1">&#39;italic&#39;</span><span class="p">,</span> <span class="s1">&#39;underline&#39;</span><span class="p">,</span> <span class="s1">&#39;blink&#39;</span><span class="p">,</span> <span class="s1">&#39;reverse&#39;</span><span class="p">,</span> <span class="s1">&#39;strike&#39;</span><span class="p">,</span> <span class="s1">&#39;dim&#39;</span><span class="p">,</span> <span class="s1">&#39;conceal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;overline&#39;</span><span class="p">,</span> <span class="s1">&#39;frame&#39;</span><span class="p">,</span> <span class="s1">&#39;encircle&#39;</span><span class="p">,</span> <span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="s1">&#39;squiggly&#39;</span><span class="p">,</span> <span class="s1">&#39;double_underline&#39;</span><span class="p">,</span>
    <span class="s1">&#39;link&#39;</span><span class="p">,</span>
    <span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;warning&#39;</span><span class="p">,</span> <span class="s1">&#39;danger&#39;</span><span class="p">,</span> <span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;critical&#39;</span><span class="p">,</span>
    <span class="s1">&#39;markdown&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;quote&#39;</span><span class="p">,</span> <span class="s1">&#39;bullet&#39;</span><span class="p">,</span> <span class="s1">&#39;number&#39;</span><span class="p">,</span>
    <span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="s1">&#39;panel&#39;</span><span class="p">,</span> <span class="s1">&#39;rule&#39;</span><span class="p">,</span> <span class="s1">&#39;padding&#39;</span><span class="p">,</span> <span class="s1">&#39;align&#39;</span><span class="p">,</span> <span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="s1">&#39;rows&#39;</span><span class="p">,</span>
    <span class="s1">&#39;superscript&#39;</span><span class="p">,</span> <span class="s1">&#39;subscript&#39;</span><span class="p">,</span>
    <span class="s1">&#39;emoji&#39;</span><span class="p">,</span> <span class="s1">&#39;task&#39;</span><span class="p">,</span> <span class="s1">&#39;progress&#39;</span><span class="p">,</span> <span class="s1">&#39;spinner&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">,</span>
    <span class="s1">&#39;h1&#39;</span><span class="p">,</span> <span class="s1">&#39;h2&#39;</span><span class="p">,</span> <span class="s1">&#39;h3&#39;</span><span class="p">,</span> <span class="s1">&#39;h4&#39;</span><span class="p">,</span> <span class="s1">&#39;h5&#39;</span><span class="p">,</span> <span class="s1">&#39;h6&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># # Add TRACE log level globally</span>
<span class="c1"># TRACE_LEVEL_NUM = 5  # TRACE is lower than DEBUG</span>
<span class="c1"># logging.addLevelName(TRACE_LEVEL_NUM, &quot;TRACE&quot;)</span>
<span class="c1">#</span>
<span class="c1"># def trace(self, message, *args, **kwargs):</span>
<span class="c1">#     if self.isEnabledFor(TRACE_LEVEL_NUM):</span>
<span class="c1">#         self._log(TRACE_LEVEL_NUM, message, args, **kwargs)</span>
<span class="c1">#</span>
<span class="c1"># logging.Logger.trace = trace</span>
<span class="c1">#</span>

<div class="viewcode-block" id="PreciseTimeFormatter"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.PreciseTimeFormatter">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">PreciseTimeFormatter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A custom logging formatter that overrides the `formatTime` method to include</span>
<span class="sd">    microseconds up to 4 decimal places in the timestamp.</span>

<span class="sd">    Methods:</span>
<span class="sd">        formatTime(record, datefmt=None):</span>
<span class="sd">            Formats the time of a log record, appending microseconds with 4 decimal places.</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import logging</span>
<span class="sd">            from datetime import datetime</span>

<span class="sd">            logger = logging.getLogger(&quot;example_logger&quot;)</span>
<span class="sd">            handler = logging.StreamHandler()</span>
<span class="sd">            formatter = PreciseTimeFormatter()</span>
<span class="sd">            handler.setFormatter(formatter)</span>
<span class="sd">            logger.addHandler(handler)</span>
<span class="sd">            logger.setLevel(logging.DEBUG)</span>

<span class="sd">            logger.info(&quot;This is an info message.&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="PreciseTimeFormatter.formatTime"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.PreciseTimeFormatter.formatTime">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">formatTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">datefmt</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Override formatTime to include microseconds up to 4 decimal places.</span>

<span class="sd">        :param record: The log record containing the timestamp.</span>
<span class="sd">        :type record: logging.LogRecord</span>
<span class="sd">        :param datefmt: Optional date format string.</span>
<span class="sd">        :type datefmt: str, optional</span>
<span class="sd">        :return: Formatted time string.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">converter</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">created</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">datefmt</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">created</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">datefmt</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">created</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
            <span class="c1"># Append milliseconds with 4 decimal places</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">microsecond</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000000</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">s</span></div></div>


<div class="viewcode-block" id="PawnConsoleHandler"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.PawnConsoleHandler">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">PawnConsoleHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Handler</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A custom logging handler that sends formatted log messages to `pawn.console`</span>
<span class="sd">    with appropriate styling based on the log level.</span>

<span class="sd">    Methods:</span>
<span class="sd">        emit(record):</span>
<span class="sd">            Processes and sends the log record to `pawn.console`.</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import logging</span>

<span class="sd">            logger = logging.getLogger(&quot;example_logger&quot;)</span>
<span class="sd">            handler = PawnConsoleHandler()</span>
<span class="sd">            logger.addHandler(handler)</span>
<span class="sd">            logger.setLevel(logging.DEBUG)</span>

<span class="sd">            logger.debug(&quot;Debug message.&quot;)</span>
<span class="sd">            logger.info(&quot;Info message.&quot;)</span>
<span class="sd">            logger.warning(&quot;Warning message.&quot;)</span>
<span class="sd">            logger.error(&quot;Error message.&quot;)</span>
<span class="sd">            logger.critical(&quot;Critical message.&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="PawnConsoleHandler.emit"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.PawnConsoleHandler.emit">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Emit a log record by formatting it and sending it to `pawn.console`.</span>

<span class="sd">        :param record: The log record to be emitted.</span>
<span class="sd">        :type record: logging.LogRecord</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Format the record using the handler&#39;s formatter</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>

            <span class="c1"># Send the message to pawn.console with appropriate styling</span>
            <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">levelno</span> <span class="o">&gt;=</span> <span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">:</span>
                <span class="n">pawn</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold red]CRITICAL[/bold red]: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record</span><span class="o">.</span><span class="n">levelno</span> <span class="o">&gt;=</span> <span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">:</span>
                <span class="n">pawn</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[red]ERROR[/red]: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record</span><span class="o">.</span><span class="n">levelno</span> <span class="o">&gt;=</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">:</span>
                <span class="n">pawn</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[yellow]WARNING[/yellow]: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record</span><span class="o">.</span><span class="n">levelno</span> <span class="o">&gt;=</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">:</span>
                <span class="n">pawn</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[cyan]INFO[/cyan]: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record</span><span class="o">.</span><span class="n">levelno</span> <span class="o">&gt;=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
                <span class="n">pawn</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[green]DEBUG[/green]: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pawn</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handleError</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ConsoleLoggerHandler"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerHandler">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">ConsoleLoggerHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Handler</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A custom logging handler for enhanced console output with verbosity, formatting, and exception handling options.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        verbose (int): Verbosity level (0 for WARNING, 1 for INFO, 2 for DEBUG).</span>
<span class="sd">        stdout (bool): Whether to output logs to standard output.</span>
<span class="sd">        console (object): The console object used for output (default is `pawn.console`).</span>
<span class="sd">        log_level_short (bool): Whether to use short log level names.</span>
<span class="sd">        simple_format (str): Formatting level (&quot;none&quot;, &quot;minimal&quot;, &quot;detailed&quot;, &quot;advanced&quot;, &quot;custom&quot;).</span>
<span class="sd">        exc_info (bool): Whether to include exception information in logs.</span>

<span class="sd">    Methods:</span>
<span class="sd">        emit(record):</span>
<span class="sd">            Processes and sends the log record to `pawn.console`.</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import logging</span>

<span class="sd">            logger = logging.getLogger(&quot;example_logger&quot;)</span>

<span class="sd">            # Initialize handler with verbosity level and other options</span>
<span class="sd">            handler = ConsoleLoggerHandler(verbose=2, stdout=True, log_level_short=True)</span>

<span class="sd">            formatter = logging.Formatter(&quot;%(asctime)s - %(name)s - %(levelname)s - %(message)s&quot;)</span>
<span class="sd">            handler.setFormatter(formatter)</span>

<span class="sd">            logger.addHandler(handler)</span>
<span class="sd">            logger.setLevel(logging.DEBUG)</span>

<span class="sd">            try:</span>
<span class="sd">                1 / 0</span>
<span class="sd">            except ZeroDivisionError as e:</span>
<span class="sd">                logger.error(&quot;An error occurred!&quot;, exc_info=True)</span>

<span class="sd">            logger.debug(&quot;Debugging details.&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="ConsoleLoggerHandler.__init__"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerHandler.__init__">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">log_level_short</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">simple_format</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">console</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the ConsoleLoggerHandler with customizable options.</span>

<span class="sd">        :param verbose: Verbosity level (0 for WARNING, 1 for INFO, 2 for DEBUG).</span>
<span class="sd">                        Default is 0.</span>
<span class="sd">        :type verbose: int</span>
<span class="sd">        :param stdout: Whether to output logs to standard output. Default is True.</span>
<span class="sd">        :type stdout: bool</span>
<span class="sd">        :param log_level_short: Whether to use short log level names. Default is False.</span>
<span class="sd">        :type log_level_short: bool</span>
<span class="sd">        :param simple_format: Formatting code level (&quot;none&quot;, &quot;minimal&quot;, &quot;detailed&quot;, &quot;advanced&quot;, &quot;custom&quot;). Default is minimal.</span>
<span class="sd">        :type simple_format: str</span>
<span class="sd">        :param exc_info: Whether to include exception information in logs. Default is False.</span>
<span class="sd">        :type exc_info: bool</span>
<span class="sd">        :param console: The console object used for output. Default is `pawn.console`.</span>
<span class="sd">                        If None, it defaults to `pawn.console`.</span>
<span class="sd">        :type console: object, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">stdout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">console</span> <span class="o">=</span> <span class="n">console</span> <span class="ow">or</span> <span class="n">pawn</span><span class="o">.</span><span class="n">console</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_log_level</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_level_short</span> <span class="o">=</span> <span class="n">log_level_short</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simple_format</span> <span class="o">=</span> <span class="n">simple_format</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exc_info</span> <span class="o">=</span> <span class="n">exc_info</span></div>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_log_level</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determine the appropriate log level based on verbosity.</span>

<span class="sd">        :return: The corresponding log level.</span>
<span class="sd">                 WARNING for verbosity 0,</span>
<span class="sd">                 INFO for verbosity 1,</span>
<span class="sd">                 DEBUG for verbosity 2 or higher.</span>
<span class="sd">                 Defaults to DEBUG if verbosity is unrecognized.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="mi">0</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
            <span class="mi">2</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
            <span class="mi">3</span><span class="p">:</span> <span class="n">TRACE</span>
        <span class="p">}</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_code_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate code information based on the selected simple_format.</span>

<span class="sd">        :param record: The log record.</span>
<span class="sd">        :return: Formatted code info string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_format</span> <span class="o">==</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_format</span> <span class="o">==</span> <span class="s2">&quot;minimal&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&gt; &quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_format</span> <span class="o">==</span> <span class="s2">&quot;detailed&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">record</span><span class="o">.</span><span class="n">lineno</span><span class="si">}</span><span class="s2">&gt; &quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_format</span> <span class="o">==</span> <span class="s2">&quot;advanced&quot;</span><span class="p">:</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">pathname</span><span class="p">)</span> <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;root&quot;</span> <span class="k">else</span> <span class="n">record</span><span class="o">.</span><span class="n">name</span>
            <span class="c1"># return f&quot;&lt;{file_name}:{record.lineno} [dim]{record.funcName}()[/dim]&gt; &quot;</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">[dim]</span><span class="si">{</span><span class="n">record</span><span class="o">.</span><span class="n">funcName</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">record</span><span class="o">.</span><span class="n">lineno</span><span class="si">}</span><span class="s2">)[/dim]&gt; &quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_format</span> <span class="o">==</span> <span class="s2">&quot;custom&quot;</span> <span class="ow">and</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simple_format</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_format</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>  <span class="c1"># Expect a custom function</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># Default for unsupported formats</span>

<div class="viewcode-block" id="ConsoleLoggerHandler.emit"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerHandler.emit">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Emit a log record by formatting it and sending it to `pawn.console`.</span>

<span class="sd">        :param record: The log record to be emitted.</span>
<span class="sd">        :type record: logging.LogRecord</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
            <span class="n">message</span> <span class="o">=</span> <span class="n">escape_non_tag_brackets</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="n">level</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">levelname</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_level_short</span><span class="p">:</span>
                <span class="n">_level</span> <span class="o">=</span> <span class="n">LOG_LEVEL_SHORT</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">levelname</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">record</span><span class="o">.</span><span class="n">levelname</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_level</span> <span class="o">=</span> <span class="n">level</span>

            <span class="n">level_tags</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;CRT&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold magenta]CRT[/bold magenta]&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ERR&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold red]ERR[/bold red]&quot;</span><span class="p">,</span>
                <span class="s2">&quot;WRN&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold orange3]WRN[/bold orange3]&quot;</span><span class="p">,</span>
                <span class="s2">&quot;INF&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold green]INF[/bold green]&quot;</span><span class="p">,</span>
                <span class="s2">&quot;DBG&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold yellow]DBG[/bold yellow]&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TRA&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold cyan]TRA[/bold cyan]&quot;</span><span class="p">,</span>

                <span class="s2">&quot;critical&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold magenta]CRIT[/bold magenta]&quot;</span><span class="p">,</span>
                <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold red]ERROR[/bold red]&quot;</span><span class="p">,</span>
                <span class="s2">&quot;warning&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold orange3]WARN[/bold orange3]&quot;</span><span class="p">,</span>
                <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold green]INFO[/bold green]&quot;</span><span class="p">,</span>
                <span class="s2">&quot;debug&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold yellow]DEBUG[/bold yellow]&quot;</span><span class="p">,</span>

                <span class="s2">&quot;trace&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold cyan]trace[/bold cyan]&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">code_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_code_info</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">code_info</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">code_info</span><span class="si">:</span><span class="s2">&lt;16</span><span class="si">}{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="n">tag</span> <span class="o">=</span> <span class="n">level_tags</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_level</span><span class="p">,</span> <span class="s2">&quot;[green]INFO[/green]&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">level</span> <span class="o">==</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">exc_info</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">exc_info</span><span class="p">:</span>
                    <span class="n">exception_traceback</span> <span class="o">=</span> <span class="n">Traceback</span><span class="o">.</span><span class="n">from_exception</span><span class="p">(</span><span class="o">*</span><span class="n">record</span><span class="o">.</span><span class="n">exc_info</span><span class="p">)</span> <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">exc_info</span> <span class="k">else</span> <span class="kc">None</span>
                    <span class="k">if</span> <span class="n">exception_traceback</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">exception_traceback</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">level</span> <span class="o">==</span> <span class="s2">&quot;debug&quot;</span> <span class="ow">and</span> <span class="n">pawn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PAWN_DEBUG&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">level</span> <span class="o">==</span> <span class="s2">&quot;trace&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handleError</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ConsoleLoggerAdapter"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerAdapter">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">ConsoleLoggerAdapter</span><span class="p">:</span>
    <span class="c1"># global_verbose = 0  # Class-level verbosity to control all instances</span>
    <span class="c1"># instances = []  # Keep track of all instances</span>
    <span class="n">_global_registry</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Global registry to track all adapters by name</span>

<div class="viewcode-block" id="ConsoleLoggerAdapter.__init__"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerAdapter.__init__">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">logger</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">,</span> <span class="n">Console</span><span class="p">,</span> <span class="n">Null</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">logger_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">verbose</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">stdout</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wrapper class to unify logging methods for logging.Logger and rich.Console.</span>

<span class="sd">        :param logger: The logger object (logging.Logger, rich.Console, or Null)</span>
<span class="sd">        :param logger_name: Name of the logger</span>
<span class="sd">        :param verbose: Verbosity level (bool or int).</span>
<span class="sd">                        If False: WARNING level (default)</span>
<span class="sd">                        If True: INFO level</span>
<span class="sd">                        If 1: INFO level</span>
<span class="sd">                        If 2: DEBUG level</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Determine log level based on verbose parameter using constants</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">verbose</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verbose_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">verbose</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verbose_int</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verbose_int</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Default to 0 if invalid type</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger_name</span> <span class="o">=</span> <span class="n">logger_name</span>

        <span class="c1"># Cap the verbose level to the max defined level</span>
        <span class="n">max_verbose_level</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">VERBOSE_LEVELS</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose_int</span> <span class="o">&gt;</span> <span class="n">max_verbose_level</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verbose_int</span> <span class="o">=</span> <span class="n">max_verbose_level</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log_level</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">VERBOSE_LEVELS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">verbose_int</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose_int</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">stdout</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">ConsoleLoggerAdapter</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">logger</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logger</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_default_logger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logger_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">,</span> <span class="n">Null</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">pawn</span><span class="o">.</span><span class="n">console</span>
            <span class="n">pawn</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;[red][ERROR][/red] Logger instance is Null. Using default logger.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_level</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stdout</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">ConsoleLoggerAdapter</span><span class="o">.</span><span class="n">_global_registry</span><span class="p">[</span><span class="n">logger_name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span></div>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_log_level</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determine log level based on verbosity.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># return logging.DEBUG if self.verbose &gt; 1 else logging.INFO if self.verbose == 1 else logging.WARNING</span>
        <span class="k">return</span> <span class="n">const</span><span class="o">.</span><span class="n">VERBOSE_LEVELS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">verbose_int</span><span class="p">,</span> <span class="n">TRACE</span><span class="p">)</span>

<div class="viewcode-block" id="ConsoleLoggerAdapter.get_adapter_logger"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerAdapter.get_adapter_logger">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_adapter_logger</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ConsoleLoggerAdapter&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve an adapter by name or create a new one if it does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_registry</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Create a new adapter if it doesn&#39;t exist</span>
            <span class="n">new_adapter</span> <span class="o">=</span> <span class="n">ConsoleLoggerAdapter</span><span class="p">(</span><span class="n">logger_name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_global_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_adapter</span>
            <span class="k">return</span> <span class="n">new_adapter</span></div>

<div class="viewcode-block" id="ConsoleLoggerAdapter.set_global_verbose"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerAdapter.set_global_verbose">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_global_verbose</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">new_verbose</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the verbosity level of all registered adapters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pawn</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_global_registry</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">adapter</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_registry</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">adapter</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">new_verbose</span>
            <span class="n">adapter</span><span class="o">.</span><span class="n">verbose_int</span> <span class="o">=</span> <span class="n">new_verbose</span>
            <span class="n">adapter</span><span class="o">.</span><span class="n">log_level</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="n">_get_log_level</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">adapter</span><span class="o">.</span><span class="n">logger</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">):</span>
                <span class="n">adapter</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">adapter</span><span class="o">.</span><span class="n">_get_log_level</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Global verbosity set to </span><span class="si">{</span><span class="n">new_verbose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_default_logger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logger_name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a default logger if none is provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logger_name</span><span class="p">)</span>
        <span class="c1"># if not self.stdout:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
            <span class="n">handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span>
            <span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> &lt;</span><span class="si">%(name)s</span><span class="s2">&gt; </span><span class="si">%(levelname)s</span><span class="s2"> - </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_level</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">logger</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_escape_non_tag_brackets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Escape non-rich-tag &#39;[&#39; in the message without altering rich tags.</span>

<span class="sd">        :param message: The log message.</span>
<span class="sd">        :return: The message with non-rich-tag &#39;[&#39; escaped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">message</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;[&#39;</span><span class="p">:</span>
                <span class="c1"># Possible start of a tag</span>
                <span class="n">tag_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\[/?([a-zA-Z0-9 _-]+)\]&#39;</span><span class="p">,</span> <span class="n">message</span><span class="p">[</span><span class="n">i</span><span class="p">:])</span>
                <span class="k">if</span> <span class="n">tag_match</span><span class="p">:</span>
                    <span class="n">tag_content</span> <span class="o">=</span> <span class="n">tag_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                    <span class="c1"># Check if all parts of the tag are valid</span>
                    <span class="n">tag_parts</span> <span class="o">=</span> <span class="n">tag_content</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">part</span> <span class="ow">in</span> <span class="n">VALID_RICH_TAGS</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">tag_parts</span><span class="p">):</span>
                        <span class="c1"># It&#39;s a valid rich tag, copy it as is</span>
                        <span class="n">tag_text</span> <span class="o">=</span> <span class="n">tag_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                        <span class="n">result</span> <span class="o">+=</span> <span class="n">tag_text</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tag_text</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># Not a valid rich tag, escape the &#39;[&#39;</span>
                        <span class="n">result</span> <span class="o">+=</span> <span class="sa">r</span><span class="s1">&#39;\[&#39;</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Not a tag, escape the &#39;[&#39;</span>
                    <span class="n">result</span> <span class="o">+=</span> <span class="sa">r</span><span class="s1">&#39;\[&#39;</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="n">message</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_should_log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if a message should be logged based on the current logging level.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">level_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">logging</span><span class="p">,</span> <span class="n">level_name</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">level_value</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_level</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exc_info</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Internal method to handle logging for both Logger and Console.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">message</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="n">level</span> <span class="o">=</span> <span class="n">level</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_should_log</span><span class="p">(</span><span class="n">level</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">stacklevel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">stack_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_stack_offset</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">stack_offset</span> <span class="o">=</span> <span class="n">stacklevel</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">):</span>
            <span class="c1"># getattr(self.logger, level, self.logger.info)(message, stacklevel=stack_offset)</span>
            <span class="k">if</span> <span class="n">exc_info</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span> <span class="ow">or</span> <span class="mi">3</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">)(</span><span class="n">message</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span> <span class="ow">or</span> <span class="mi">3</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">,</span> <span class="n">Console</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">exc_info</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[red] </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">[/red]&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">print_exception</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_escape_non_tag_brackets</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>  <span class="c1"># Escape brackets in the message</span>

                <span class="n">level_tags</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;critical&quot;</span><span class="p">:</span> <span class="s2">&quot;[bold red]CRIT[/bold red]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;[red]ERROR[/red]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;warning&quot;</span><span class="p">:</span> <span class="s2">&quot;[yellow]WARN[/yellow]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="s2">&quot;[cyan]INFO[/cyan]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;debug&quot;</span><span class="p">:</span> <span class="s2">&quot;[green]DEBUG[/green]&quot;</span><span class="p">,</span>
                <span class="p">}</span>

                <span class="n">tag</span> <span class="o">=</span> <span class="n">level_tags</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="s2">&quot;[cyan]INFO[/cyan]&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">level</span> <span class="o">==</span> <span class="s2">&quot;debug&quot;</span> <span class="ow">and</span> <span class="n">pawn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PAWN_DEBUG&#39;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">_stack_offset</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&lt;</span><span class="si">{</span><span class="n">stack_offset</span><span class="si">}</span><span class="s2">&gt; </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">_stack_offset</span><span class="o">=</span><span class="n">stack_offset</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># Do nothing if logger type is unknown</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_stack_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1"># Return the appropriate stack offset</span>
        <span class="k">return</span> <span class="mi">3</span>

<div class="viewcode-block" id="ConsoleLoggerAdapter.exception"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerAdapter.exception">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Log an exception with the error level and include the traceback.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">exc_info</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span></div>

    <span class="c1"># Public methods for common logging levels</span>
<div class="viewcode-block" id="ConsoleLoggerAdapter.critical"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerAdapter.critical">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s2">&quot;critical&quot;</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConsoleLoggerAdapter.error"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerAdapter.error">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">exc_info</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConsoleLoggerAdapter.warn"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerAdapter.warn">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">warn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConsoleLoggerAdapter.warning"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerAdapter.warning">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConsoleLoggerAdapter.info"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerAdapter.info">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConsoleLoggerAdapter.debug"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.ConsoleLoggerAdapter.debug">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s2">&quot;debug&quot;</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span></div>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a string representation of the ConsoleLoggerAdapter showing the type of logger used and log level.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_logger_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
        <span class="n">log_level_name</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLevelName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_level</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;ConsoleLoggerAdapter &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">logger_name</span><span class="si">}</span><span class="s2">&#39;, logger_type=</span><span class="si">{</span><span class="n">logger_type</span><span class="si">}</span><span class="s2">, verbose=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">verbose_int</span><span class="si">}</span><span class="s2">, log_level=</span><span class="si">{</span><span class="n">log_level_name</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_logger_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logger</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper method to recursively determine the type of the logger.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">ConsoleLoggerAdapter</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_logger_type</span><span class="p">(</span><span class="n">logger</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;Logger&quot;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">Console</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;Console&quot;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">Null</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;Null&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">logger</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span></div>


<div class="viewcode-block" id="escape_non_tag_brackets"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.escape_non_tag_brackets">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">escape_non_tag_brackets</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Escape &#39;[&#39; and &#39;]&#39; that are not part of a valid Rich tag.</span>

<span class="sd">    :param message: The log message.</span>
<span class="sd">    :return: The message with non-tag brackets escaped.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">replace_bracket</span><span class="p">(</span><span class="n">match</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\[/?([a-zA-Z0-9 _-]+)\]&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">text</span>  <span class="c1"># Valid tag</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># return text.replace(&#39;[&#39;, r&#39;\[&#39;).replace(&#39;]&#39;, r&#39;\]&#39;)</span>
            <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;\[&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\[.*?\]&#39;</span><span class="p">,</span> <span class="n">replace_bracket</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="BaseFormatter"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.BaseFormatter">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">BaseFormatter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A custom logging formatter that provides additional flexibility for log formatting.</span>

<span class="sd">    This formatter allows customization of log level display, simple formatting, and</span>
<span class="sd">    time formatting. It also cleans the log message by removing rich tags.</span>

<span class="sd">    :param fmt: The format string for the log message.</span>
<span class="sd">    :type fmt: str, optional</span>
<span class="sd">    :param datefmt: The format string for the date/time in the log message.</span>
<span class="sd">    :type datefmt: str, optional</span>
<span class="sd">    :param log_level_short: Whether to use short names for log levels (e.g., &quot;E&quot; for &quot;ERROR&quot;).</span>
<span class="sd">    :type log_level_short: bool, optional</span>
<span class="sd">    :param simple_format: Whether to use a simplified format for the log record.</span>
<span class="sd">    :type simple_format: bool, optional</span>

<span class="sd">    Methods:</span>
<span class="sd">        - formatTime(record, datefmt=None): Formats the timestamp of the log record.</span>
<span class="sd">        - format(record): Cleans and reformats the log record message.</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import logging</span>

<span class="sd">            # Define a custom formatter</span>
<span class="sd">            formatter = BaseFormatter(</span>
<span class="sd">                fmt=&quot;%(asctime)s - %(levelname)s - %(message)s&quot;,</span>
<span class="sd">                datefmt=&quot;%Y-%m-%d %H:%M:%S&quot;,</span>
<span class="sd">                log_level_short=True</span>
<span class="sd">            )</span>

<span class="sd">            # Create a logger and handler</span>
<span class="sd">            logger = logging.getLogger(&quot;example_logger&quot;)</span>
<span class="sd">            handler = logging.StreamHandler()</span>
<span class="sd">            handler.setFormatter(formatter)</span>
<span class="sd">            logger.addHandler(handler)</span>
<span class="sd">            logger.setLevel(logging.DEBUG)</span>

<span class="sd">            # Log messages</span>
<span class="sd">            logger.info(&quot;This is an info message.&quot;)</span>
<span class="sd">            logger.error(&quot;This is an error message with &lt;rich&gt; tags.&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">datefmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">log_level_short</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">simple_format</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="n">datefmt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_level_short</span> <span class="o">=</span> <span class="n">log_level_short</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simple_format</span> <span class="o">=</span> <span class="n">simple_format</span>

<div class="viewcode-block" id="BaseFormatter.formatTime"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.BaseFormatter.formatTime">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">formatTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">datefmt</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the timestamp of a log record.</span>

<span class="sd">        If a custom `datefmt` is provided, it will be used to format the time.</span>
<span class="sd">        Otherwise, it defaults to &quot;YYYY-MM-DD HH:MM:SS&quot;.</span>

<span class="sd">        :param record: The log record containing the timestamp.</span>
<span class="sd">        :type record: logging.LogRecord</span>
<span class="sd">        :param datefmt: Optional custom format string for the timestamp.</span>
<span class="sd">        :type datefmt: str, optional</span>
<span class="sd">        :return: The formatted timestamp as a string.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">converter</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">created</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">datefmt</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">created</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">datefmt</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">created</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseFormatter.format"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.BaseFormatter.format">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clean and reformat the log record message.</span>

<span class="sd">        This method cleans the original message by removing rich tags and optionally</span>
<span class="sd">        modifies other attributes of the log record based on initialization parameters.</span>

<span class="sd">        :param record: The original log record to be formatted.</span>
<span class="sd">        :type record: logging.LogRecord</span>
<span class="sd">        :return: The formatted log message as a string.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">original_message</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">getMessage</span><span class="p">()</span>
            <span class="n">clean_message</span> <span class="o">=</span> <span class="n">remove_rich_tags</span><span class="p">(</span><span class="n">original_message</span><span class="p">)</span>

            <span class="n">record_copy</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">makeLogRecord</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
            <span class="n">record_copy</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">clean_message</span>
            <span class="n">record_copy</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_level_short</span><span class="p">:</span>
                <span class="n">record_copy</span><span class="o">.</span><span class="n">levelname</span> <span class="o">=</span> <span class="n">LOG_LEVEL_SHORT</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">levelname</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">record</span><span class="o">.</span><span class="n">levelname</span><span class="p">)</span>

            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">record_copy</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Logging error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span></div></div>


<div class="viewcode-block" id="CleanFormatter"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.CleanFormatter">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">CleanFormatter</span><span class="p">(</span><span class="n">BaseFormatter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A subclass of `BaseFormatter` with no additional functionality.</span>

<span class="sd">    This class inherits all features from `BaseFormatter` without any modifications,</span>
<span class="sd">    making it suitable for cases where no further customization is required.</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import logging</span>

<span class="sd">            # Define a clean formatter</span>
<span class="sd">            formatter = CleanFormatter(</span>
<span class="sd">                fmt=&quot;%(asctime)s - %(levelname)s - %(message)s&quot;,</span>
<span class="sd">                datefmt=&quot;%Y-%m-%d %H:%M:%S&quot;</span>
<span class="sd">            )</span>

<span class="sd">            # Create a logger and handler</span>
<span class="sd">            logger = logging.getLogger(&quot;clean_logger&quot;)</span>
<span class="sd">            handler = logging.StreamHandler()</span>
<span class="sd">            handler.setFormatter(formatter)</span>
<span class="sd">            logger.addHandler(handler)</span>
<span class="sd">            logger.setLevel(logging.INFO)</span>

<span class="sd">            # Log messages</span>
<span class="sd">            logger.info(&quot;This is a clean info message.&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="CleanAndDetailTimeFormatter"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.CleanAndDetailTimeFormatter">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">CleanAndDetailTimeFormatter</span><span class="p">(</span><span class="n">BaseFormatter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A custom logging formatter that extends `BaseFormatter` to include detailed time formatting</span>
<span class="sd">    with fractional seconds precision.</span>

<span class="sd">    This formatter allows customization of log level display, simple formatting, and time formatting,</span>
<span class="sd">    with the added ability to specify the number of decimal places for fractional seconds.</span>

<span class="sd">    :param fmt: The format string for the log message.</span>
<span class="sd">    :type fmt: str, optional</span>
<span class="sd">    :param datefmt: The format string for the date/time in the log message.</span>
<span class="sd">    :type datefmt: str, optional</span>
<span class="sd">    :param log_level_short: Whether to use short names for log levels (e.g., &quot;E&quot; for &quot;ERROR&quot;).</span>
<span class="sd">    :type log_level_short: bool, optional</span>
<span class="sd">    :param simple_format: Formatting code level (&quot;none&quot;, &quot;minimal&quot;, &quot;detailed&quot;, &quot;advanced&quot;, &quot;custom&quot;). Default is minimal.</span>
<span class="sd">    :type simple_format: str</span>
<span class="sd">    :param precision: The number of decimal places for fractional seconds in the timestamp.</span>
<span class="sd">                      Defaults to 4.</span>
<span class="sd">    :type precision: int, optional</span>

<span class="sd">    Methods:</span>
<span class="sd">        - formatTime(record, datefmt=None): Formats the timestamp of the log record with fractional seconds.</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import logging</span>

<span class="sd">            # Define a custom formatter with fractional second precision</span>
<span class="sd">            formatter = CleanAndDetailTimeFormatter(</span>
<span class="sd">                fmt=&quot;%(asctime)s - %(levelname)s - %(message)s&quot;,</span>
<span class="sd">                datefmt=&quot;%Y-%m-%d %H:%M:%S&quot;,</span>
<span class="sd">                precision=6</span>
<span class="sd">            )</span>

<span class="sd">            # Create a logger and handler</span>
<span class="sd">            logger = logging.getLogger(&quot;detailed_logger&quot;)</span>
<span class="sd">            handler = logging.StreamHandler()</span>
<span class="sd">            handler.setFormatter(formatter)</span>
<span class="sd">            logger.addHandler(handler)</span>
<span class="sd">            logger.setLevel(logging.DEBUG)</span>

<span class="sd">            # Log messages</span>
<span class="sd">            logger.info(&quot;This is an info message.&quot;)</span>
<span class="sd">            logger.error(&quot;This is an error message with detailed time.&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="CleanAndDetailTimeFormatter.__init__"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.CleanAndDetailTimeFormatter.__init__">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">datefmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">log_level_short</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">simple_format</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the formatter with optional precision for fractional seconds.</span>

<span class="sd">        :param fmt: The format string for the log message.</span>
<span class="sd">        :type fmt: str, optional</span>
<span class="sd">        :param datefmt: The format string for the date/time in the log message.</span>
<span class="sd">        :type datefmt: str, optional</span>
<span class="sd">        :param log_level_short: Whether to use short names for log levels (e.g., &quot;E&quot; for &quot;ERROR&quot;).</span>
<span class="sd">        :type log_level_short: bool, optional</span>
<span class="sd">        :param simple_format: Formatting code level (&quot;none&quot;, &quot;minimal&quot;, &quot;detailed&quot;, &quot;advanced&quot;, &quot;custom&quot;). Default is minimal.</span>
<span class="sd">        :type simple_format: str</span>
<span class="sd">        :param precision: The number of decimal places for fractional seconds in the timestamp.</span>
<span class="sd">                          Defaults to 4.</span>
<span class="sd">        :type precision: int, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="n">datefmt</span><span class="p">,</span> <span class="n">log_level_short</span><span class="p">,</span> <span class="n">simple_format</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">precision</span> <span class="o">=</span> <span class="n">precision</span></div>

<div class="viewcode-block" id="CleanAndDetailTimeFormatter.formatTime"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.CleanAndDetailTimeFormatter.formatTime">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">formatTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">datefmt</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the timestamp of a log record with fractional seconds.</span>

<span class="sd">        If a custom `datefmt` is provided, it will be used to format the time. Otherwise,</span>
<span class="sd">        it defaults to &quot;YYYY-MM-DD HH:MM:SS&quot; with fractional seconds formatted to the specified precision.</span>

<span class="sd">        :param record: The log record containing the timestamp.</span>
<span class="sd">        :type record: logging.LogRecord</span>
<span class="sd">        :param datefmt: Optional custom format string for the timestamp.</span>
<span class="sd">        :type datefmt: str, optional</span>
<span class="sd">        :return: The formatted timestamp as a string.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">converter</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">created</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">datefmt</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">created</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">datefmt</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">created</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
            <span class="n">fractional_seconds</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">microsecond</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1_000_000</span><span class="si">:</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">precision</span><span class="si">}</span><span class="s2">f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="c1"># s += fractional_seconds</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">fractional_seconds</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>  <span class="c1"># Replace decimal point with a comma</span>
        <span class="k">return</span> <span class="n">s</span></div></div>


<div class="viewcode-block" id="remove_rich_tags"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.remove_rich_tags">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">remove_rich_tags</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes valid Rich tags from the given message while leaving invalid tags intact.</span>

<span class="sd">    This function scans the input message for Rich-style tags (e.g., `[tag]` or `[/tag]`),</span>
<span class="sd">    validates them against a predefined list of valid tags, and removes only the valid ones.</span>
<span class="sd">    Invalid tags are preserved in the output.</span>

<span class="sd">    :param message: The input string containing Rich-style tags.</span>
<span class="sd">    :type message: str</span>
<span class="sd">    :return: The message with valid Rich tags removed.</span>
<span class="sd">    :rtype: str</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Example usage</span>
<span class="sd">            message = &quot;This is a [bold]bold[/bold] and [invalid]invalid[/invalid] tag example.&quot;</span>
<span class="sd">            clean_message = remove_rich_tags(message)</span>
<span class="sd">            print(clean_message)</span>
<span class="sd">            # Output: &quot;This is a bold and [invalid]invalid[/invalid] tag example.&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tag_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\[/?([a-zA-Z0-9 _-]+)\]&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid_tag</span><span class="p">(</span><span class="n">tag_content</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the given tag content is valid based on predefined valid tags.</span>

<span class="sd">        :param tag_content: The content of the tag to validate.</span>
<span class="sd">        :type tag_content: str</span>
<span class="sd">        :return: True if the tag is valid, False otherwise.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tag_parts</span> <span class="o">=</span> <span class="n">tag_content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">part</span> <span class="ow">in</span> <span class="n">VALID_RICH_TAGS</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">tag_parts</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">tag_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="n">tag_content</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_valid_tag</span><span class="p">(</span><span class="n">tag_content</span><span class="p">):</span>
                <span class="n">pos</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>  <span class="c1"># Skip valid tags</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Keep invalid tags</span>
                <span class="n">pos</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">message</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
            <span class="n">pos</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="AppOrEnabledFilter"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.AppOrEnabledFilter">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">AppOrEnabledFilter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Filter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A logging filter that allows log records to pass if their logger name</span>
<span class="sd">    starts with a specified application name or exactly matches a logger name</span>
<span class="sd">    in an explicit enabled list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="AppOrEnabledFilter.__init__"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.AppOrEnabledFilter.__init__">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_prefixes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">enabled_list</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the filter.</span>

<span class="sd">        :param app_prefixes: A list of application name prefixes. Loggers whose names exactly match any of these prefixes or start with any of these prefixes followed by a dot (e.g., &#39;myapp&#39; or &#39;myapp.module&#39;) will be allowed.</span>
<span class="sd">        :type app_prefixes: List[str]</span>
<span class="sd">        :param enabled_list: An optional list of specific logger names that should always be enabled, regardless of the `app_prefixes`.</span>
<span class="sd">        :type enabled_list: list, optional</span>
<span class="sd">        :param name: The name of the filter. This is passed to the parent logging.Filter class.</span>
<span class="sd">        :type name: str, optional</span>

<span class="sd">        Example:</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">                filter1 = AppOrEnabledFilter(app_prefixes=[&#39;my_app&#39;], enabled_list=[&#39;httpx&#39;])</span>
<span class="sd">                filter2 = AppOrEnabledFilter(app_prefixes=[&#39;my_app&#39;, &#39;another_app&#39;])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app_prefixes_dot</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.&quot;</span> <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">app_prefixes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app_names</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">app_prefixes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enabled_list</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">enabled_list</span> <span class="ow">or</span> <span class="p">[])</span></div>

<div class="viewcode-block" id="AppOrEnabledFilter.filter"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.AppOrEnabledFilter.filter">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">LogRecord</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines whether the given log record should be output.</span>

<span class="sd">        The record passes if:</span>
<span class="sd">        - The record&#39;s logger name is exactly one of `self.app_names` (e.g., &#39;oci_tools&#39;), OR</span>
<span class="sd">        - The record&#39;s logger name starts with one of `self.app_prefixes_dot` (e.g., &#39;oci_tools.sub&#39;), OR</span>
<span class="sd">        - The record&#39;s logger name is found in `self.enabled_list` (e.g., &#39;httpx&#39; if &#39;httpx&#39; is in `enabled_list`).</span>

<span class="sd">        :param record: The log record to evaluate.</span>
<span class="sd">        :type record: logging.LogRecord</span>
<span class="sd">        :returns: True if the record should be processed, False otherwise.</span>
<span class="sd">        :rtype: bool</span>

<span class="sd">        Example:</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">                # Assuming filter initialized with app_prefixes=[&#39;my_app&#39;], enabled_list=[&#39;external_lib&#39;]</span>
<span class="sd">                record1 = logging.LogRecord(name=&#39;my_app&#39;, level=logging.INFO, pathname=&#39;&#39;, lineno=0, msg=&#39;Test&#39;, args=(), exc_info=None)</span>
<span class="sd">                filter.filter(record1)</span>
<span class="sd">                # &gt;&gt; True</span>

<span class="sd">                record2 = logging.LogRecord(name=&#39;my_app.sub_module&#39;, level=logging.INFO, pathname=&#39;&#39;, lineno=0, msg=&#39;Test&#39;, args=(), exc_info=None)</span>
<span class="sd">                filter.filter(record2)</span>
<span class="sd">                # &gt;&gt; True</span>

<span class="sd">                record3 = logging.LogRecord(name=&#39;external_lib&#39;, level=logging.INFO, pathname=&#39;&#39;, lineno=0, msg=&#39;Test&#39;, args=(), exc_info=None)</span>
<span class="sd">                filter.filter(record3)</span>
<span class="sd">                # &gt;&gt; True</span>

<span class="sd">                record4 = logging.LogRecord(name=&#39;another_lib&#39;, level=logging.INFO, pathname=&#39;&#39;, lineno=0, msg=&#39;Test&#39;, args=(), exc_info=None)</span>
<span class="sd">                filter.filter(record4)</span>
<span class="sd">                # &gt;&gt; False</span>

<span class="sd">                # Assuming filter initialized with app_prefixes=[&#39;appA&#39;, &#39;appB&#39;]</span>
<span class="sd">                record5 = logging.LogRecord(name=&#39;appB&#39;, level=logging.INFO, pathname=&#39;&#39;, lineno=0, msg=&#39;Test&#39;, args=(), exc_info=None)</span>
<span class="sd">                filter.filter(record5)</span>
<span class="sd">                # &gt;&gt; True</span>

<span class="sd">                record6 = logging.LogRecord(name=&#39;appB.component&#39;, level=logging.INFO, pathname=&#39;&#39;, lineno=0, msg=&#39;Test&#39;, args=(), exc_info=None)</span>
<span class="sd">                filter.filter(record6)</span>
<span class="sd">                # &gt;&gt; True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">app_names</span> <span class="ow">or</span> <span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_prefixes_dot</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled_list</span> <span class="ow">and</span> <span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled_list</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div></div>


<div class="viewcode-block" id="setup_app_logger"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.setup_app_logger">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">setup_app_logger</span><span class="p">(</span>
    <span class="n">app_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
    <span class="n">log_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;console&#39;</span><span class="p">,</span>
    <span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">log_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;./logs&quot;</span><span class="p">,</span>
    <span class="n">log_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_level</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">clear_existing_handlers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">configure_root</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">propagate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">enabled_third_party_loggers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_all_third_party</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">log_level_short</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">simple_format</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;detailed&quot;</span><span class="p">,</span>
    <span class="n">exc_info</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">rotate_time</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;midnight&#39;</span><span class="p">,</span>
    <span class="n">rotate_interval</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">backup_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
    <span class="n">handle_propagate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">propagate_scope</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configures and sets up a Python logger for an application, addressing filtering</span>
<span class="sd">    and duplicate output issues while maintaining backward compatibility.</span>
<span class="sd">    The function operates in two modes based on the `configure_root` parameter.</span>

<span class="sd">    :param app_name: The name(s) of the application. Can be a single string or a list of strings. Used for naming the logger(s) and the log file. If a list, the first item is used for the log file name.</span>
<span class="sd">    :type app_name: Union[str, List[str]]</span>
<span class="sd">    :param log_type: Specifies where logs should be output. Can be &#39;console&#39;, &#39;file&#39;, or &#39;both&#39;. Defaults to &#39;console&#39;.</span>
<span class="sd">    :type log_type: str</span>
<span class="sd">    :param verbose: Verbosity level, an integer from 0 to 5. Higher values mean more detailed logs. This is translated to a logging level if `log_level` is not explicitly set. Defaults to 1.</span>
<span class="sd">    :type verbose: int</span>
<span class="sd">    :param log_path: The directory where log files will be stored if `log_type` includes &#39;file&#39;. Defaults to &quot;./logs&quot;.</span>
<span class="sd">    :type log_path: str</span>
<span class="sd">    :param log_format: The format string for log messages. If None, a default format is used.</span>
<span class="sd">    :type log_format: str, optional</span>
<span class="sd">    :param date_format: The format string for the date/time in log messages. If None, a default is used.</span>
<span class="sd">    :type date_format: str, optional</span>
<span class="sd">    :param log_level: The logging level to set (e.g., logging.INFO, &#39;DEBUG&#39;). Overrides `verbose` if provided.</span>
<span class="sd">    :type log_level: Union[int, str, None]</span>
<span class="sd">    :param clear_existing_handlers: If True, clears all existing handlers from the logger before adding new ones. This primarily applies when `configure_root` is False. Defaults to True.</span>
<span class="sd">    :type clear_existing_handlers: bool</span>
<span class="sd">    :param configure_root: If True, configures the root logger. This enables a centralized logging approach with filtering. If False, configures a named logger (based on `app_name`). Defaults to False.</span>
<span class="sd">    :type configure_root: bool</span>
<span class="sd">    :param propagate: Whether messages from the `app_name` logger will be passed to ancestor loggers. Only applies when `configure_root` is False. Defaults to False.</span>
<span class="sd">    :type propagate: bool</span>
<span class="sd">    :param enabled_third_party_loggers: A list of names of specific third-party loggers that should always be enabled, even if `log_all_third_party` is False. Applies when `configure_root` is True.</span>
<span class="sd">    :type enabled_third_party_loggers: Optional[List[str]]</span>
<span class="sd">    :param log_all_third_party: If True, all log messages from any logger (including third-party) will be processed by the handlers. If False and `configure_root` is True, only logs from `app_name` (or `app_prefixes`) and specified `enabled_third_party_loggers` will pass through the filter. Defaults to False.</span>
<span class="sd">    :type log_all_third_party: bool</span>
<span class="sd">    :param log_level_short: If True, uses a short form for log levels in the console output (e.g., &#39;D&#39; for DEBUG).</span>
<span class="sd">    :type log_level_short: bool</span>
<span class="sd">    :param simple_format: Controls the detail level of the default format for console. Can be &quot;detailed&quot;, True (for a simpler format), or False (for the most basic format).</span>
<span class="sd">    :type simple_format: Union[str, bool]</span>
<span class="sd">    :param exc_info: If True, exception information is added to log records. This is passed to the ConsoleLoggerHandler.</span>
<span class="sd">    :type exc_info: bool</span>
<span class="sd">    :param rotate_time: When to rotate log files. Options like &#39;midnight&#39;, &#39;H&#39; (hourly), &#39;M&#39; (minutes). Only applies if `log_type` includes &#39;file&#39;.</span>
<span class="sd">    :type rotate_time: str</span>
<span class="sd">    :param rotate_interval: The interval for log file rotation (e.g., 1 for daily rotation if `rotate_time` is &#39;midnight&#39;). Only applies if `log_type` includes &#39;file&#39;.</span>
<span class="sd">    :type rotate_interval: int</span>
<span class="sd">    :param backup_count: The number of old log files to keep. Only applies if `log_type` includes &#39;file&#39;.</span>
<span class="sd">    :type backup_count: int</span>
<span class="sd">    :param handle_propagate: If True, automatically adjusts propagation settings for other loggers based on `propagate_scope` to prevent duplicate output.</span>
<span class="sd">    :type handle_propagate: bool</span>
<span class="sd">    :param propagate_scope: Defines the scope for `handle_propagate`. Can be &#39;all&#39; or other specific scopes relevant to pawnlib.</span>
<span class="sd">    :type propagate_scope: str</span>
<span class="sd">    :returns: The configured logger instance, typically for the first `app_name` in the list if `app_name` is a list, or the single `app_name` string.</span>
<span class="sd">    :rtype: logging.Logger</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import logging</span>
<span class="sd">            import os</span>
<span class="sd">            # Assuming pawnlib.utils.log module is available or its components are imported</span>
<span class="sd">            # from pawnlib.utils.log import setup_app_logger, verbose_to_log_level, ConsoleLoggerHandler, CleanAndDetailTimeFormatter, AppOrEnabledFilter, change_propagate_setting</span>
<span class="sd">            # from logging.handlers import TimedRotatingFileHandler</span>

<span class="sd">            # Example 1: Basic console logger for a single app name</span>
<span class="sd">            logger1 = setup_app_logger(app_name=&quot;my_application&quot;, log_type=&quot;console&quot;, verbose=3)</span>
<span class="sd">            logger1.info(&quot;This is an informational message from my_application.&quot;)</span>
<span class="sd">            logging.getLogger(&quot;another_module&quot;).debug(&quot;This message will not show by default if configure_root is False.&quot;)</span>

<span class="sd">            # Example 2: File logger with rotation for a specific app</span>
<span class="sd">            logger2 = setup_app_logger(</span>
<span class="sd">                app_name=&quot;file_app&quot;,</span>
<span class="sd">                log_type=&quot;file&quot;,</span>
<span class="sd">                log_path=&quot;./my_logs&quot;,</span>
<span class="sd">                log_level=&quot;WARNING&quot;,</span>
<span class="sd">                rotate_time=&#39;D&#39;, # Daily rotation</span>
<span class="sd">                backup_count=5</span>
<span class="sd">            )</span>
<span class="sd">            logger2.warning(&quot;This warning goes to a file.&quot;)</span>
<span class="sd">            logger2.info(&quot;This info message will not appear due to WARNING level.&quot;)</span>

<span class="sd">            # Example 3: Centralized root logger with multiple app prefixes and third-party filtering</span>
<span class="sd">            # Logs for &#39;main_app&#39;, &#39;sub_component&#39;, and &#39;httpx&#39; will be processed</span>
<span class="sd">            root_logger = setup_app_logger(</span>
<span class="sd">                app_name=[&quot;main_app&quot;, &quot;sub_component&quot;],</span>
<span class="sd">                log_type=&quot;console&quot;,</span>
<span class="sd">                configure_root=True,</span>
<span class="sd">                log_level=&quot;DEBUG&quot;, # Root logger gets DEBUG, effective level for &#39;main_app&#39; and &#39;sub_component&#39; is DEBUG</span>
<span class="sd">                enabled_third_party_loggers=[&#39;httpx&#39;, &#39;sqlalchemy&#39;]</span>
<span class="sd">            )</span>
<span class="sd">            logging.getLogger(&quot;main_app&quot;).info(&quot;Main app message.&quot;)</span>
<span class="sd">            logging.getLogger(&quot;sub_component.core&quot;).debug(&quot;Sub component debug message.&quot;)</span>
<span class="sd">            logging.getLogger(&quot;httpx&quot;).info(&quot;HTTPX library message.&quot;)</span>
<span class="sd">            logging.getLogger(&quot;requests&quot;).warning(&quot;Requests library message (should be filtered out).&quot;)</span>
<span class="sd">            logging.getLogger(&quot;sqlalchemy.engine&quot;).info(&quot;SQLAlchemy engine message.&quot;)</span>


<span class="sd">            # Example 4: Centralized root logger logging ALL messages</span>
<span class="sd">            all_logs_logger = setup_app_logger(</span>
<span class="sd">                app_name=&quot;catch_all_app&quot;,</span>
<span class="sd">                log_type=&quot;console&quot;,</span>
<span class="sd">                configure_root=True,</span>
<span class="sd">                log_level=&quot;INFO&quot;,</span>
<span class="sd">                log_all_third_party=True</span>
<span class="sd">            )</span>
<span class="sd">            logging.getLogger(&quot;catch_all_app&quot;).info(&quot;My app&#39;s info.&quot;)</span>
<span class="sd">            logging.getLogger(&quot;any_library_name&quot;).debug(&quot;Debug from any library, will show because log_all_third_party is True and root is DEBUG.&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">log_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">effective_log_level</span> <span class="o">=</span> <span class="n">log_level</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">log_level</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">log_level</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">effective_log_level</span> <span class="o">=</span> <span class="n">verbose_to_log_level</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span>

    <span class="n">app_prefixes</span> <span class="o">=</span> <span class="p">[</span><span class="n">app_name</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">app_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">app_name</span>

    <span class="n">target_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span> <span class="k">if</span> <span class="n">configure_root</span> <span class="k">else</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">app_prefixes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">configure_root</span><span class="p">:</span>
        <span class="n">target_logger</span><span class="o">.</span><span class="n">handlers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">target_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">app_prefixes</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">effective_log_level</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">target_logger</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="n">propagate</span>
        <span class="k">if</span> <span class="n">clear_existing_handlers</span><span class="p">:</span>
            <span class="n">target_logger</span><span class="o">.</span><span class="n">handlers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">propagate</span><span class="p">:</span>

            <span class="n">root_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">root_logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">[:]:</span>
                <span class="n">is_console_conflict</span> <span class="o">=</span> <span class="p">(</span><span class="n">log_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;console&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">))</span>
                <span class="n">is_file_conflict</span> <span class="o">=</span> <span class="p">(</span><span class="n">log_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">is_console_conflict</span> <span class="ow">or</span> <span class="n">is_file_conflict</span><span class="p">:</span>
                    <span class="n">root_logger</span><span class="o">.</span><span class="n">removeHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
        <span class="n">target_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">effective_log_level</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">log_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;console&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">ConsoleLoggerHandler</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">target_logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">):</span>
            <span class="n">console_handler</span> <span class="o">=</span> <span class="n">ConsoleLoggerHandler</span><span class="p">(</span>
                <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">log_level_short</span><span class="o">=</span><span class="n">log_level_short</span><span class="p">,</span>
                <span class="n">simple_format</span><span class="o">=</span><span class="n">simple_format</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">exc_info</span>
            <span class="p">)</span>
            <span class="n">console_formatter</span> <span class="o">=</span> <span class="n">CleanAndDetailTimeFormatter</span><span class="p">(</span> <span class="c1"># fmt 인자 없이 호출</span>
                <span class="n">datefmt</span><span class="o">=</span><span class="n">date_format</span><span class="p">,</span> <span class="n">log_level_short</span><span class="o">=</span><span class="n">log_level_short</span><span class="p">,</span>
                <span class="n">simple_format</span><span class="o">=</span><span class="n">simple_format</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">console_handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">console_formatter</span><span class="p">)</span>
            <span class="n">target_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">console_handler</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">log_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">TimedRotatingFileHandler</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">target_logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">log_format</span><span class="p">:</span> <span class="c1"># 파일 포맷 기본값 설정</span>
                <span class="n">log_format</span> <span class="o">=</span> <span class="s1">&#39;[</span><span class="si">%(asctime)s</span><span class="s1">] </span><span class="si">%(levelname)s</span><span class="s1"> - </span><span class="si">%(name)s</span><span class="s1">:</span><span class="si">%(lineno)d</span><span class="s1"> - </span><span class="si">%(message)s</span><span class="s1">&#39;</span>
            <span class="n">file_formatter</span> <span class="o">=</span> <span class="n">CleanAndDetailTimeFormatter</span><span class="p">(</span> <span class="c1"># fmt 인자를 포함하여 호출</span>
                <span class="n">fmt</span><span class="o">=</span><span class="n">log_format</span><span class="p">,</span> <span class="n">datefmt</span><span class="o">=</span><span class="n">date_format</span><span class="p">,</span> <span class="n">log_level_short</span><span class="o">=</span><span class="n">log_level_short</span><span class="p">,</span>
                <span class="n">simple_format</span><span class="o">=</span><span class="n">simple_format</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">log_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">log_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">log_path</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">app_prefixes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">.log&quot;</span><span class="p">)</span>
            <span class="n">file_handler</span> <span class="o">=</span> <span class="n">TimedRotatingFileHandler</span><span class="p">(</span>
                <span class="n">filename</span><span class="o">=</span><span class="n">log_filename</span><span class="p">,</span> <span class="n">when</span><span class="o">=</span><span class="n">rotate_time</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="n">rotate_interval</span><span class="p">,</span>
                <span class="n">backupCount</span><span class="o">=</span><span class="n">backup_count</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span>
            <span class="p">)</span>
            <span class="n">file_handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">file_formatter</span><span class="p">)</span>
            <span class="n">target_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">file_handler</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">configure_root</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">log_all_third_party</span><span class="p">:</span>
        <span class="n">app_filter</span> <span class="o">=</span> <span class="n">AppOrEnabledFilter</span><span class="p">(</span><span class="n">app_prefixes</span><span class="p">,</span> <span class="n">enabled_third_party_loggers</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">target_logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
            <span class="c1"># 모든 핸들러에 필터를 동일하게 적용</span>
            <span class="n">handler</span><span class="o">.</span><span class="n">addFilter</span><span class="p">(</span><span class="n">app_filter</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">handle_propagate</span><span class="p">:</span>
        <span class="n">change_propagate_setting</span><span class="p">(</span>
            <span class="n">propagate</span><span class="o">=</span><span class="n">propagate</span><span class="p">,</span> <span class="n">propagate_scope</span><span class="o">=</span><span class="n">propagate_scope</span><span class="p">,</span>
            <span class="n">log_level</span><span class="o">=</span><span class="n">effective_log_level</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">app_prefixes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div>


<div class="viewcode-block" id="setup_logger"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.setup_logger">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">setup_logger</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Setup or reuse a logger.</span>

<span class="sd">    This function will reuse an existing logger if provided, otherwise it will create a new one.</span>

<span class="sd">    :param logger: Existing logger to reuse. If None, a new logger will be created inside ConsoleLoggerAdapter.</span>
<span class="sd">    :param name: Name of the logger.</span>
<span class="sd">    :param verbose: Verbosity level.</span>
<span class="sd">    :return: A ConsoleLoggerAdapter instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">ConsoleLoggerAdapter</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">logger</span>  <span class="c1"># Reuse the existing ConsoleLoggerAdapter if already provided.</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">logger</span>
    <span class="k">return</span> <span class="n">ConsoleLoggerAdapter</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span></div>


<div class="viewcode-block" id="getPawnLogger"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.getPawnLogger">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">getPawnLogger</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a logger with the specified name, creating it if necessary.</span>
<span class="sd">    It will reuse an existing logger if it exists.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">ConsoleLoggerAdapter</span><span class="o">.</span><span class="n">_global_registry</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ConsoleLoggerAdapter</span><span class="o">.</span><span class="n">_global_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="c1"># Create new adapter and register it</span>
    <span class="n">new_logger</span> <span class="o">=</span> <span class="n">ConsoleLoggerAdapter</span><span class="p">(</span><span class="n">logger_name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
    <span class="n">ConsoleLoggerAdapter</span><span class="o">.</span><span class="n">_global_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_logger</span>
    <span class="k">return</span> <span class="n">new_logger</span></div>


<div class="viewcode-block" id="add_logger"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.add_logger">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">add_logger</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decorator to add a logger attribute to a class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">Wrapped</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Wrapped</span></div>


<div class="viewcode-block" id="get_logger"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.get_logger">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">get_logger</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a logger instance.</span>
<span class="sd">    If `name` is not provided, it defaults to the caller&#39;s module name.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_back</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_globals</span><span class="p">[</span><span class="s2">&quot;__name__&quot;</span><span class="p">]</span>

    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NullHandler</span><span class="p">())</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">logger</span></div>


<div class="viewcode-block" id="LoggerMixin"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerMixin">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">LoggerMixin</span><span class="p">:</span>
    <span class="c1"># def get_logger(self):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Returns a logger instance with a name in the format &#39;module_name.ClassName&#39;.</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     return logging.getLogger(f&quot;{self.__module__}.{self.__class__.__name__}&quot;)</span>

<div class="viewcode-block" id="LoggerMixin.get_logger"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerMixin.get_logger">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_logger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a logger instance with a name in the format &#39;module_name.ClassName&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logger_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NullHandler</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">logger</span></div></div>

<div class="viewcode-block" id="change_log_level"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.change_log_level">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">change_log_level</span><span class="p">(</span><span class="n">new_level</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Change the log level of the specified logger or the root logger.</span>

<span class="sd">    :param new_level: New log level (e.g., &#39;DEBUG&#39;, &#39;INFO&#39;).</span>
<span class="sd">    :param logger: Logger instance to modify. If None, modifies the root logger.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">logger</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>  <span class="c1"># Default to root logger</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_level</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">new_level</span> <span class="o">=</span> <span class="n">new_level</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">new_level</span> <span class="ow">in</span> <span class="n">logging</span><span class="o">.</span><span class="n">_nameToLevel</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">_nameToLevel</span><span class="p">[</span><span class="n">new_level</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid log level: </span><span class="si">{</span><span class="n">new_level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_level</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">new_level</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Log level must be a string or integer.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="LoggerFactory"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">LoggerFactory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A factory class for creating and managing loggers with console and file output.</span>

<span class="sd">    Supports configuration of loggers with console and/or file handlers, customizable log formats,</span>
<span class="sd">    and global settings for level and format. Handles propagation and temporary settings via context managers.</span>

<span class="sd">    :param _loggers: Dictionary of logger instances, keyed by logger name</span>
<span class="sd">    :type _loggers: dict</span>
<span class="sd">    :param _global_log_level: Global logging level applied to all loggers if `use_global_level` is True</span>
<span class="sd">    :type _global_log_level: int or None</span>
<span class="sd">    :param _use_global_level: Flag to enforce global log level across all loggers</span>
<span class="sd">    :type _use_global_level: bool</span>
<span class="sd">    :param _global_simple_format: Default format style for console output (&#39;detailed&#39; or &#39;minimal&#39;)</span>
<span class="sd">    :type _global_simple_format: str</span>
<span class="sd">    :param _global_filters: List of filter functions applied to all loggers</span>
<span class="sd">    :type _global_filters: list</span>
<span class="sd">    :param _global_handler_configs: List of dictionaries containing handler type and configuration</span>
<span class="sd">    :type _global_handler_configs: list</span>
<span class="sd">    :param _propagate: Whether log messages propagate to parent loggers</span>
<span class="sd">    :type _propagate: bool</span>
<span class="sd">    :param _propagate_scope: Scope for applying propagation settings (&#39;all&#39; by default)</span>
<span class="sd">    :type _propagate_scope: str</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">        # Example usage</span>
<span class="sd">        import logging</span>
<span class="sd">        from  import LoggerFactory</span>

<span class="sd">        # Basic logger with both console and file output</span>
<span class="sd">        logger = LoggerFactory.create_app_logger(</span>
<span class="sd">            log_type=&#39;both&#39;,</span>
<span class="sd">            verbose=2,</span>
<span class="sd">            app_name=&#39;MyApp&#39;,</span>
<span class="sd">            log_path=&#39;./logs&#39;</span>
<span class="sd">        )</span>
<span class="sd">        logger.info(&quot;Application started&quot;)</span>
<span class="sd">        logger.debug(&quot;Debug message&quot;)</span>
<span class="sd">        # Console Output:</span>
<span class="sd">        # [INF] &lt;MyApp:XX&gt; Application started</span>
<span class="sd">        # [DBG] &lt;MyApp:XX&gt; Debug message</span>
<span class="sd">        # File Output (./logs/MyApp.log):</span>
<span class="sd">        # [2025-03-12 10:00:00,123] INF::main.py/main(XX) Application started</span>
<span class="sd">        # [2025-03-12 10:00:00,124] DBG::main.py/main(XX) Debug message</span>

<span class="sd">        # Sub-logger with inherited settings</span>
<span class="sd">        sub_logger = LoggerFactory.get_logger(&#39;MyApp.sub&#39;, verbose=2)</span>
<span class="sd">        sub_logger.info(&quot;Sub logger message&quot;)</span>
<span class="sd">        # Console Output:</span>
<span class="sd">        # [INF] &lt;MyApp.sub:XX&gt; Sub logger message</span>

<span class="sd">        # Temporary settings with context manager</span>
<span class="sd">        with LoggerFactory.temporary_settings(log_level=1, simple_format=&#39;minimal&#39;):</span>
<span class="sd">            temp_logger = LoggerFactory.get_logger(&#39;MyApp.temp&#39;)</span>
<span class="sd">            temp_logger.info(&quot;Temporary info message&quot;)</span>
<span class="sd">            temp_logger.debug(&quot;This debug won&#39;t appear&quot;)</span>
<span class="sd">        # Console Output:</span>
<span class="sd">        # [INF] Temporary info message</span>

<span class="sd">        # Adjust logger level</span>
<span class="sd">        LoggerFactory.adjust_logger_level(&#39;MyApp&#39;, verbose=1)</span>
<span class="sd">        logger.debug(&quot;This debug won&#39;t appear after level change&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_loggers</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">_global_log_level</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_use_global_level</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_global_simple_format</span> <span class="o">=</span> <span class="s2">&quot;detailed&quot;</span>
    <span class="n">_global_filters</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_global_handler_configs</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">ConsoleLoggerHandler</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;stdout&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;log_level_short&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}}]</span>
    <span class="n">_propagate</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_propagate_scope</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span>
    <span class="n">_global_logging_enabled</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="LoggerFactory.enable_global_logging"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.enable_global_logging">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">enable_global_logging</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_global_logging_enabled</span> <span class="o">=</span> <span class="n">enabled</span>
        <span class="c1"># 전역 설정 변경 시 모든 로거 업데이트</span>
        <span class="k">for</span> <span class="n">logger</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">enabled</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>  <span class="c1"># 핸들러가 없으면 추가</span>
                <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create_handlers</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">enabled</span><span class="p">:</span>  <span class="c1"># 비활성화 시 핸들러 제거</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">NO_LOG</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoggerFactory.create_app_logger"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.create_app_logger">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_app_logger</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span>
            <span class="n">log_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;console&#39;</span><span class="p">,</span>
            <span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">log_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;./logs&quot;</span><span class="p">,</span>
            <span class="n">app_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="n">log_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">,</span>
            <span class="n">log_level</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">log_level_short</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
            <span class="n">simple_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;detailed&quot;</span><span class="p">,</span>
            <span class="n">exc_info</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">rotate_time</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;midnight&#39;</span><span class="p">,</span>
            <span class="n">rotate_interval</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">backup_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
            <span class="n">clear_existing_handlers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
            <span class="n">propagate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure and return an application logger.</span>

<span class="sd">        :param log_type: Type of logging (&#39;console&#39;, &#39;file&#39;, or &#39;both&#39;)</span>
<span class="sd">        :type log_type: str</span>
<span class="sd">        :param verbose: Verbosity level (0=WARNING, 1=INFO, 2=DEBUG)</span>
<span class="sd">        :type verbose: int</span>
<span class="sd">        :param log_path: Directory path for log files</span>
<span class="sd">        :type log_path: str</span>
<span class="sd">        :param app_name: Name of the logger</span>
<span class="sd">        :type app_name: str</span>
<span class="sd">        :param log_format: Custom log format string (default: detailed timestamp format)</span>
<span class="sd">        :type log_format: str, optional</span>
<span class="sd">        :param date_format: Date format for log timestamps</span>
<span class="sd">        :type date_format: str</span>
<span class="sd">        :param log_level: Logging level as int or str (e.g., &#39;INFO&#39;)</span>
<span class="sd">        :type log_level: int or str, optional</span>
<span class="sd">        :param log_level_short: Use short level names (e.g., INF)</span>
<span class="sd">        :type log_level_short: bool</span>
<span class="sd">        :param simple_format: Formatting code level (&quot;none&quot;, &quot;minimal&quot;, &quot;detailed&quot;, &quot;advanced&quot;, &quot;custom&quot;). Default is minimal.</span>
<span class="sd">        :type simple_format: str</span>
<span class="sd">        :param exc_info: Include exception info in logs</span>
<span class="sd">        :type exc_info: bool</span>
<span class="sd">        :param rotate_time: When to rotate logs (e.g., &#39;midnight&#39;)</span>
<span class="sd">        :type rotate_time: str</span>
<span class="sd">        :param rotate_interval: Interval for log rotation</span>
<span class="sd">        :type rotate_interval: int</span>
<span class="sd">        :param backup_count: Number of backup log files to keep</span>
<span class="sd">        :type backup_count: int</span>
<span class="sd">        :param clear_existing_handlers: Clear existing handlers before adding new ones</span>
<span class="sd">        :type clear_existing_handlers: bool</span>
<span class="sd">        :param propagate: Set propagation behavior (overrides class default if provided)</span>
<span class="sd">        :type propagate: bool, optional</span>
<span class="sd">        :return: Configured logger instance</span>
<span class="sd">        :rtype: logging.Logger</span>
<span class="sd">        :raises ValueError: If no handlers are added to the logger</span>

<span class="sd">        Example:</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">                from pawnlib.config import create_app_logger</span>

<span class="sd">                # Set up a console logger with DEBUG level</span>
<span class="sd">                logger_console = create_app_logger(</span>
<span class="sd">                    log_type=&#39;console&#39;,</span>
<span class="sd">                    verbose=2,</span>
<span class="sd">                    app_name=&#39;my_app&#39;,</span>
<span class="sd">                    log_level=&#39;DEBUG&#39;</span>
<span class="sd">                )</span>

<span class="sd">                logger_console.info(&quot;Start [bold red]Important[/bold red] process&quot;)</span>

<span class="sd">                # Set up a file logger with INFO level and daily rotation</span>
<span class="sd">                logger = create_app_logger(</span>
<span class="sd">                    log_type=&#39;file&#39;,</span>
<span class="sd">                    verbose=1,</span>
<span class="sd">                    log_path=&#39;./logs&#39;,</span>
<span class="sd">                    app_name=&#39;my_app&#39;,</span>
<span class="sd">                    rotate_time=&#39;midnight&#39;,</span>
<span class="sd">                    rotate_interval=1,</span>
<span class="sd">                    backup_count=10</span>
<span class="sd">                )</span>

<span class="sd">                logger.info(&quot;This is an info message.&quot;)</span>
<span class="sd">                logger.debug(&quot;This is a debug message.&quot;)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">log_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">log_path</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">log_path</span><span class="p">)</span>

        <span class="c1"># 로깅 레벨 결정</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">log_level</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">log_level</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">_nameToLevel</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">log_level</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">log_level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">log_level</span> <span class="o">=</span> <span class="n">verbose_to_log_level</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span>

        <span class="c1"># 로거 생성 및 설정</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">propagate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_propagate</span> <span class="o">=</span> <span class="n">propagate</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_propagate</span>
        <span class="k">if</span> <span class="n">clear_existing_handlers</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># 기존 핸들러 제거로 중복 방지</span>

        <span class="c1"># 기본 로그 포맷 설정</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">log_format</span><span class="p">:</span>
            <span class="n">log_format</span> <span class="o">=</span> <span class="s1">&#39;[</span><span class="si">%(asctime)s</span><span class="s1">,</span><span class="si">%(msecs)03d</span><span class="s1">] </span><span class="si">%(levelname)s</span><span class="s1">::</span><span class="si">%(filename)s</span><span class="s1">/</span><span class="si">%(funcName)s</span><span class="s1">(</span><span class="si">%(lineno)d</span><span class="s1">) </span><span class="si">%(message)s</span><span class="s1">&#39;</span>

        <span class="c1"># # simple_format에 따른 콘솔 포맷 설정</span>
        <span class="c1"># if simple_format == &quot;detailed&quot;:</span>
        <span class="c1">#     console_fmt = &#39;[%(levelname)s] &lt;%(name)s:%(lineno)d&gt; %(message)s&#39;</span>
        <span class="c1"># elif simple_format == &quot;minimal&quot;:</span>
        <span class="c1">#     console_fmt = &#39;[%(levelname)s] %(message)s&#39;</span>
        <span class="c1"># else:</span>
        <span class="c1">#     console_fmt = log_format</span>

        <span class="c1"># 포매터 생성</span>
        <span class="n">console_formatter</span> <span class="o">=</span> <span class="n">CleanAndDetailTimeFormatter</span><span class="p">(</span><span class="n">datefmt</span><span class="o">=</span><span class="n">date_format</span><span class="p">,</span> <span class="n">log_level_short</span><span class="o">=</span><span class="n">log_level_short</span><span class="p">)</span>
        <span class="n">file_formatter</span> <span class="o">=</span> <span class="n">CleanAndDetailTimeFormatter</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="n">log_format</span><span class="p">,</span> <span class="n">datefmt</span><span class="o">=</span><span class="n">date_format</span><span class="p">,</span> <span class="n">log_level_short</span><span class="o">=</span><span class="n">log_level_short</span><span class="p">)</span>

        <span class="c1"># _global_handler_configs 초기화 및 핸들러 설정</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_global_handler_configs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">verbose</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_logging_enabled</span><span class="p">)</span> <span class="ow">and</span> <span class="n">log_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;console&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">):</span>
            <span class="n">console_handler</span> <span class="o">=</span> <span class="n">ConsoleLoggerHandler</span><span class="p">(</span>
                <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
                <span class="n">stdout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">log_level_short</span><span class="o">=</span><span class="n">log_level_short</span><span class="p">,</span>
                <span class="n">simple_format</span><span class="o">=</span><span class="n">simple_format</span><span class="p">,</span>
                <span class="n">exc_info</span><span class="o">=</span><span class="n">exc_info</span>
            <span class="p">)</span>
            <span class="n">console_handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">console_formatter</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">console_handler</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_global_handler_configs</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">ConsoleLoggerHandler</span><span class="p">,</span>
                <span class="s2">&quot;kwargs&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="n">verbose</span><span class="p">,</span>
                    <span class="s2">&quot;stdout&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s2">&quot;log_level_short&quot;</span><span class="p">:</span> <span class="n">log_level_short</span><span class="p">,</span>
                    <span class="s2">&quot;simple_format&quot;</span><span class="p">:</span> <span class="n">simple_format</span><span class="p">,</span>
                    <span class="s2">&quot;exc_info&quot;</span><span class="p">:</span> <span class="n">exc_info</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">})</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">verbose</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_logging_enabled</span><span class="p">)</span> <span class="ow">and</span> <span class="n">log_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">):</span>
            <span class="n">log_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">log_path</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">app_name</span><span class="si">}</span><span class="s2">.log&quot;</span><span class="p">)</span>
            <span class="n">file_handler</span> <span class="o">=</span> <span class="n">TimedRotatingFileHandler</span><span class="p">(</span>
                <span class="n">filename</span><span class="o">=</span><span class="n">log_filename</span><span class="p">,</span>
                <span class="n">when</span><span class="o">=</span><span class="n">rotate_time</span><span class="p">,</span>
                <span class="n">interval</span><span class="o">=</span><span class="n">rotate_interval</span><span class="p">,</span>
                <span class="n">backupCount</span><span class="o">=</span><span class="n">backup_count</span><span class="p">,</span>
                <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span>
            <span class="p">)</span>
            <span class="n">file_handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">file_formatter</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">file_handler</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_global_handler_configs</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">TimedRotatingFileHandler</span><span class="p">,</span>
                <span class="s2">&quot;kwargs&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">log_filename</span><span class="p">,</span>
                    <span class="s2">&quot;when&quot;</span><span class="p">:</span> <span class="n">rotate_time</span><span class="p">,</span>
                    <span class="s2">&quot;interval&quot;</span><span class="p">:</span> <span class="n">rotate_interval</span><span class="p">,</span>
                    <span class="s2">&quot;backupCount&quot;</span><span class="p">:</span> <span class="n">backup_count</span><span class="p">,</span>
                    <span class="s2">&quot;encoding&quot;</span><span class="p">:</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;formatter&quot;</span><span class="p">:</span> <span class="n">file_formatter</span>
            <span class="p">})</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span> <span class="ow">and</span> <span class="p">(</span><span class="n">verbose</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_logging_enabled</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No handlers added for logger &#39;</span><span class="si">{</span><span class="n">app_name</span><span class="si">}</span><span class="s2">&#39; despite enabled logging.&quot;</span><span class="p">)</span>

        <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="p">[</span><span class="n">app_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">logger</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_global_simple_format</span> <span class="o">=</span> <span class="n">simple_format</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_use_global_level</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_log_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_global_log_level</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
                <span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_global_log_level</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">logger</span></div>
        <span class="c1"># if log_type in (&#39;console&#39;, &#39;both&#39;):</span>
        <span class="c1">#     console_handler = ConsoleLoggerHandler(</span>
        <span class="c1">#         verbose=verbose,</span>
        <span class="c1">#         stdout=True,</span>
        <span class="c1">#         log_level_short=log_level_short,</span>
        <span class="c1">#         simple_format=simple_format,</span>
        <span class="c1">#         exc_info=exc_info</span>
        <span class="c1">#     )</span>
        <span class="c1">#     console_handler.setFormatter(console_formatter)</span>
        <span class="c1">#     logger.addHandler(console_handler)</span>
        <span class="c1">#     cls._global_handler_configs.append({</span>
        <span class="c1">#         &quot;type&quot;: ConsoleLoggerHandler,</span>
        <span class="c1">#         &quot;kwargs&quot;: {</span>
        <span class="c1">#             &quot;verbose&quot;: verbose,</span>
        <span class="c1">#             &quot;stdout&quot;: True,</span>
        <span class="c1">#             &quot;log_level_short&quot;: log_level_short,</span>
        <span class="c1">#             &quot;simple_format&quot;: simple_format,</span>
        <span class="c1">#             &quot;exc_info&quot;: exc_info,</span>
        <span class="c1">#         },</span>
        <span class="c1">#         # &quot;formatter&quot;: console_formatter  # 포매터 별도 저장</span>
        <span class="c1">#     })</span>
        <span class="c1">#</span>
        <span class="c1"># if log_type in (&#39;file&#39;, &#39;both&#39;):</span>
        <span class="c1">#     log_filename = os.path.join(log_path, f&quot;{app_name}.log&quot;)</span>
        <span class="c1">#     file_handler = TimedRotatingFileHandler(</span>
        <span class="c1">#         filename=log_filename,</span>
        <span class="c1">#         when=rotate_time,</span>
        <span class="c1">#         interval=rotate_interval,</span>
        <span class="c1">#         backupCount=backup_count,</span>
        <span class="c1">#         encoding=&#39;utf-8&#39;</span>
        <span class="c1">#     )</span>
        <span class="c1">#     file_handler.setFormatter(file_formatter)  # 파일 핸들러에 포매터 설정</span>
        <span class="c1">#     logger.addHandler(file_handler)</span>
        <span class="c1">#     cls._global_handler_configs.append({</span>
        <span class="c1">#         &quot;type&quot;: TimedRotatingFileHandler,</span>
        <span class="c1">#         &quot;kwargs&quot;: {</span>
        <span class="c1">#             &quot;filename&quot;: log_filename,</span>
        <span class="c1">#             &quot;when&quot;: rotate_time,</span>
        <span class="c1">#             &quot;interval&quot;: rotate_interval,</span>
        <span class="c1">#             &quot;backupCount&quot;: backup_count,</span>
        <span class="c1">#             &quot;encoding&quot;: &#39;utf-8&#39;,</span>
        <span class="c1">#         },</span>
        <span class="c1">#         &quot;formatter&quot;: file_formatter  # 포매터 별도 저장</span>
        <span class="c1">#     })</span>
        <span class="c1">#</span>
        <span class="c1"># if not logger.handlers:</span>
        <span class="c1">#     raise ValueError(f&quot;No handlers added for logger &#39;{app_name}&#39;.&quot;)</span>
        <span class="c1">#</span>
        <span class="c1"># cls._loggers[app_name] = logger</span>
        <span class="c1"># cls._global_simple_format = simple_format</span>
        <span class="c1"># if cls._use_global_level and cls._global_log_level is not None:</span>
        <span class="c1">#     logger.setLevel(cls._global_log_level)</span>
        <span class="c1">#     for handler in logger.handlers:</span>
        <span class="c1">#         handler.setLevel(cls._global_log_level)</span>
        <span class="c1">#</span>
        <span class="c1"># return logger</span>

<div class="viewcode-block" id="LoggerFactory.set_global_log_level"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.set_global_log_level">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_global_log_level</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">use_global</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set global logging level and enforce it across all loggers.</span>

<span class="sd">        :param verbose: Verbosity level (0=WARNING, 1=INFO, 2=DEBUG)</span>
<span class="sd">        :type verbose: int</span>
<span class="sd">        :param use_global: Enforce global level on all loggers</span>
<span class="sd">        :type use_global: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log_level</span> <span class="o">=</span> <span class="n">verbose_to_log_level</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_global_log_level</span> <span class="o">=</span> <span class="n">log_level</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_use_global_level</span> <span class="o">=</span> <span class="n">use_global</span>
        <span class="k">for</span> <span class="n">logger</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
                <span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoggerFactory.set_global_simple_format"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.set_global_simple_format">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_global_simple_format</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">simple_format</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set global simple format for console handlers.</span>

<span class="sd">        :param simple_format: Format style (&#39;detailed&#39;, &#39;minimal&#39;)</span>
<span class="sd">        :type simple_format: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_global_simple_format</span> <span class="o">=</span> <span class="n">simple_format</span>
        <span class="k">for</span> <span class="n">logger</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">ConsoleLoggerHandler</span><span class="p">):</span>
                    <span class="n">handler</span><span class="o">.</span><span class="n">simple_format</span> <span class="o">=</span> <span class="n">simple_format</span></div>

<div class="viewcode-block" id="LoggerFactory.add_global_filter"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.add_global_filter">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_global_filter</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">filter_func</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a global filter to all loggers.</span>

<span class="sd">        :param filter_func: Filter function to apply to log records</span>
<span class="sd">        :type filter_func: callable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_global_filters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filter_func</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">logger</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_filters</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">addFilter</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoggerFactory.add_global_handler"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.add_global_handler">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_global_handler</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">handler_type</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a global handler to all loggers.</span>

<span class="sd">        :param handler_type: Type of handler to add (e.g., ConsoleLoggerHandler)</span>
<span class="sd">        :type handler_type: type</span>
<span class="sd">        :param kwargs: Keyword arguments for handler initialization</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_global_handler_configs</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">handler_type</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">})</span>
        <span class="k">for</span> <span class="n">logger</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">handler</span> <span class="o">=</span> <span class="n">handler_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
            <span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_global_log_level</span> <span class="ow">or</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoggerFactory.clear_unused_loggers"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.clear_unused_loggers">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">clear_unused_loggers</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove unused loggers from the factory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">active_loggers</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">logger</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">logger</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">is</span> <span class="n">logger</span><span class="p">:</span>
                <span class="n">active_loggers</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">logger</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span> <span class="o">=</span> <span class="n">active_loggers</span></div>

<div class="viewcode-block" id="LoggerFactory.adjust_logger_level"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.adjust_logger_level">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">adjust_logger_level</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adjust the logging level for a specific logger.</span>

<span class="sd">        :param name: Name of the logger to adjust</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :param verbose: Verbosity level (0=WARNING, 1=INFO, 2=DEBUG)</span>
<span class="sd">        :type verbose: int</span>
<span class="sd">        :raises ValueError: If the logger is not found</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">logger</span><span class="p">:</span>
            <span class="n">log_level</span> <span class="o">=</span> <span class="n">verbose_to_log_level</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
                <span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Logger &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; not found.&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoggerFactory.get_global_settings"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.get_global_settings">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_global_settings</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current global settings of the factory.</span>

<span class="sd">        :return: Dictionary containing global settings</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;log_level&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_log_level</span><span class="p">,</span>
            <span class="s2">&quot;use_global_level&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_use_global_level</span><span class="p">,</span>
            <span class="s2">&quot;simple_format&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_simple_format</span><span class="p">,</span>
            <span class="s2">&quot;logger_count&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="p">),</span>
            <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_filters</span><span class="p">],</span>
            <span class="s2">&quot;handlers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_handler_configs</span><span class="p">],</span>
            <span class="s2">&quot;global_logging_enabled&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_logging_enabled</span>
        <span class="p">}</span></div>

<div class="viewcode-block" id="LoggerFactory.temporary_settings"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.temporary_settings">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="nd">@contextmanager</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">temporary_settings</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">log_level</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">simple_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Temporarily adjust global settings within a context.</span>

<span class="sd">        :param log_level: Temporary log level</span>
<span class="sd">        :type log_level: int, optional</span>
<span class="sd">        :param simple_format: Temporary simple format</span>
<span class="sd">        :type simple_format: str, optional</span>
<span class="sd">        :yield: Context for temporary settings</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">original_level</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_log_level</span>
        <span class="n">original_format</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_simple_format</span>
        <span class="n">original_use_global</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_use_global_level</span>

        <span class="k">if</span> <span class="n">log_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">set_global_log_level</span><span class="p">(</span><span class="n">verbose_to_log_level</span><span class="p">(</span><span class="n">log_level</span><span class="p">),</span> <span class="n">use_global</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">simple_format</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">set_global_simple_format</span><span class="p">(</span><span class="n">simple_format</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">yield</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_global_log_level</span> <span class="o">=</span> <span class="n">original_level</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_global_simple_format</span> <span class="o">=</span> <span class="n">original_format</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_use_global_level</span> <span class="o">=</span> <span class="n">original_use_global</span>
            <span class="k">for</span> <span class="n">logger</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="c1"># logger.setLevel(original_level or logging.WARNING)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">original_level</span> <span class="ow">or</span> <span class="n">NO_LOG</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
                    <span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">original_level</span> <span class="ow">or</span> <span class="n">NO_LOG</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">ConsoleLoggerHandler</span><span class="p">):</span>
                        <span class="n">handler</span><span class="o">.</span><span class="n">simple_format</span> <span class="o">=</span> <span class="n">original_format</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_create_handlers</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">simple_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create handlers based on global configurations.</span>

<span class="sd">        :param verbose: Verbosity level for handlers</span>
<span class="sd">        :type verbose: int</span>
<span class="sd">        :param simple_format: Override simple format for console handlers</span>
<span class="sd">        :type simple_format: str, optional</span>
<span class="sd">        :return: List of configured handlers</span>
<span class="sd">        :rtype: list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">handlers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_handler_configs</span><span class="p">:</span>
            <span class="n">handler_type</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;kwargs&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">handler_type</span> <span class="o">==</span> <span class="n">ConsoleLoggerHandler</span><span class="p">:</span>
                <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                    <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="n">verbose</span><span class="p">,</span>
                    <span class="s2">&quot;simple_format&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_simple_format</span> <span class="k">if</span> <span class="n">simple_format</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">simple_format</span>
                <span class="p">})</span>
            <span class="n">handler</span> <span class="o">=</span> <span class="n">handler_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;formatter&quot;</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span>
                <span class="n">handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;formatter&quot;</span><span class="p">])</span>  <span class="c1"># 저장된 포매터 적용</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_filters</span><span class="p">:</span>
                <span class="n">handler</span><span class="o">.</span><span class="n">addFilter</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">handlers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">handlers</span>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def get_logger(cls, name, verbose=0, simple_format=None):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Get or create a logger with specified settings.</span>
    <span class="c1">#</span>
    <span class="c1">#     :param name: Name of the logger</span>
    <span class="c1">#     :type name: str</span>
    <span class="c1">#     :param verbose: Verbosity level (0=WARNING, 1=INFO, 2=DEBUG)</span>
    <span class="c1">#     :type verbose: int</span>
    <span class="c1">#     :param simple_format: Override simple format for console handlers</span>
    <span class="c1">#     :type simple_format: str, optional</span>
    <span class="c1">#     :return: Configured logger instance</span>
    <span class="c1">#     :rtype: logging.Logger</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     logger = cls._loggers.get(name)</span>
    <span class="c1">#     if not logger:</span>
    <span class="c1">#         logger = logging.getLogger(name)</span>
    <span class="c1">#         logger.propagate = cls._propagate</span>
    <span class="c1">#         # 기존 핸들러가 없으면 새 핸들러 추가</span>
    <span class="c1">#         if not logger.handlers and verbose &gt;= 0:</span>
    <span class="c1">#             for handler in cls._create_handlers(verbose, simple_format):</span>
    <span class="c1">#                 logger.addHandler(handler)</span>
    <span class="c1">#         cls._loggers[name] = logger</span>
    <span class="c1">#</span>
    <span class="c1">#     log_level = cls._global_log_level if cls._use_global_level and cls._global_log_level is not None else verbose_to_log_level(verbose)</span>
    <span class="c1">#     if logger.level != log_level:</span>
    <span class="c1">#         logger.setLevel(log_level)</span>
    <span class="c1">#         for handler in logger.handlers:</span>
    <span class="c1">#             handler.setLevel(log_level)</span>
    <span class="c1">#</span>
    <span class="c1">#     return logger</span>
<div class="viewcode-block" id="LoggerFactory.get_logger"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.get_logger">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_logger</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">simple_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="p">:</span>
            <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_propagate</span>
            <span class="c1"># 변경: verbose &gt;= 0 또는 전역 설정 활성화 시에만 핸들러 추가</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span> <span class="ow">and</span> <span class="p">(</span><span class="n">verbose</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_logging_enabled</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create_handlers</span><span class="p">(</span><span class="n">verbose</span><span class="p">,</span> <span class="n">simple_format</span><span class="p">):</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">logger</span>

        <span class="n">log_level</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_log_level</span> <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_use_global_level</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_global_log_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">verbose_to_log_level</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">logger</span><span class="o">.</span><span class="n">level</span> <span class="o">!=</span> <span class="n">log_level</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
                <span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">logger</span></div>

    <span class="c1"># 신규 추가: 특정 로거의 핸들러 제거 메서드</span>
<div class="viewcode-block" id="LoggerFactory.clear_handlers"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.clear_handlers">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">clear_handlers</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;특정 로거의 모든 핸들러를 제거하고 로깅 비활성화&quot;&quot;&quot;</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">logger</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">NO_LOG</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Logger &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; not found.&quot;</span><span class="p">)</span></div>

    <span class="c1"># 신규 추가: 모든 로거의 핸들러 제거 메서드</span>
<div class="viewcode-block" id="LoggerFactory.clear_all_handlers"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerFactory.clear_all_handlers">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">clear_all_handlers</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;모든 로거의 핸들러를 제거하고 로깅 비활성화&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">logger</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_loggers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">NO_LOG</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="LoggerMixinVerbose"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerMixinVerbose">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">LoggerMixinVerbose</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A mixin class for initializing loggers in classes with customizable verbosity and format.</span>

<span class="sd">    Provides a method to set up a logger either by inheriting an existing logger or creating a new one</span>
<span class="sd">    using `LoggerFactory`. Ensures the logger is properly configured with handlers, levels, and propagation settings.</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Example usage</span>
<span class="sd">            from pawnlib.config import LoggerMixinVerbose, LoggerFactory</span>

<span class="sd">            # Define a class using the mixin</span>
<span class="sd">            class MyClass(LoggerMixinVerbose):</span>
<span class="sd">                def __init__(self, verbose=1):</span>
<span class="sd">                    self.init_logger(verbose=verbose)</span>

<span class="sd">            # Basic usage with LoggerFactory</span>
<span class="sd">            obj = MyClass(verbose=2)</span>
<span class="sd">            obj.logger.info(&quot;Class initialized&quot;)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # [INF] &lt;__main__.MyClass:XX&gt; Class initialized</span>

<span class="sd">            # Using an existing logger</span>
<span class="sd">            parent_logger = LoggerFactory.create_app_logger(log_type=&#39;console&#39;, verbose=1, app_name=&#39;Parent&#39;)</span>
<span class="sd">            obj_with_parent = MyClass(verbose=0)</span>
<span class="sd">            obj_with_parent.init_logger(logger=parent_logger)</span>
<span class="sd">            obj_with_parent.logger.info(&quot;Using parent logger&quot;)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # [INF] &lt;Parent:XX&gt; Using parent logger</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="LoggerMixinVerbose.init_logger"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.LoggerMixinVerbose.init_logger">[docs]</a>    <span class="k">def</span><span class="w"> </span><span class="nf">init_logger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">simple_format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize or update the logger for the class instance.</span>

<span class="sd">        :param logger: Existing logger to inherit handlers and level from</span>
<span class="sd">        :type logger: logging.Logger, optional</span>
<span class="sd">        :param verbose: Verbosity level (0=WARNING, 1=INFO, 2=DEBUG)</span>
<span class="sd">        :type verbose: int</span>
<span class="sd">        :param simple_format: Override simple format for console handlers (&#39;detailed&#39;, &#39;minimal&#39;)</span>
<span class="sd">        :type simple_format: str, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log_level</span> <span class="o">=</span> <span class="n">verbose_to_log_level</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span>

        <span class="c1"># if not hasattr(self, &#39;logger&#39;) or self.logger is None:</span>
        <span class="c1">#     if logger and isinstance(logger, logging.Logger):</span>
        <span class="c1">#         self.logger = logging.getLogger(f&quot;{self.__module__}.{self.__class__.__name__}&quot;)</span>
        <span class="c1">#         self.logger.handlers = logger.handlers</span>
        <span class="c1">#         self.logger.setLevel(logger.level)</span>
        <span class="c1">#         self.logger.propagate = False</span>
        <span class="c1">#     elif logger and isinstance(logger, Console):</span>
        <span class="c1">#         self.logger = ConsoleLoggerAdapter(logger, &quot;name&quot;, verbose)</span>
        <span class="c1">#     else:</span>
        <span class="c1">#         self.logger = LoggerFactory.get_logger(f&quot;{self.__module__}.{self.__class__.__name__}&quot;, verbose, simple_format)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;logger&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">logger</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">handlers</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">elif</span> <span class="n">logger</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">Console</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">ConsoleLoggerAdapter</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
                    <span class="n">simple_format</span><span class="o">=</span><span class="n">simple_format</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">,</span> <span class="s1">&#39;handlers&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">handler</span><span class="p">:</span>
                    <span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="change_propagate_setting"><a class="viewcode-back" href="../../../module/pawnlib.config.html#pawnlib.config.logging_config.change_propagate_setting">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">change_propagate_setting</span><span class="p">(</span><span class="n">propagate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">propagate_scope</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">log_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">pawnlib_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">third_party_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Change the propagation settings and log levels for all registered loggers.</span>

<span class="sd">    Allows modification of propagation behavior and log levels across all loggers, with scoping options</span>
<span class="sd">    to target all loggers, only `pawnlib` loggers, or third-party loggers.</span>

<span class="sd">    :param propagate: Whether loggers should propagate messages to parent loggers</span>
<span class="sd">    :type propagate: bool</span>
<span class="sd">    :param propagate_scope: Scope for applying propagation (&#39;all&#39;, &#39;pawnlib&#39;, &#39;third_party&#39;)</span>
<span class="sd">    :type propagate_scope: str</span>
<span class="sd">    :param log_level: Log level to apply when scope is &#39;all&#39;</span>
<span class="sd">    :type log_level: int, optional</span>
<span class="sd">    :param pawnlib_level: Log level for `pawnlib` loggers when scope is &#39;pawnlib&#39; or &#39;third_party&#39;</span>
<span class="sd">    :type pawnlib_level: int, optional</span>
<span class="sd">    :param third_party_level: Log level for non-`pawnlib` loggers when scope is &#39;pawnlib&#39; or &#39;third_party&#39;</span>
<span class="sd">    :type third_party_level: int, optional</span>
<span class="sd">    :raises ValueError: If `propagate_scope` is not one of &#39;all&#39;, &#39;pawnlib&#39;, or &#39;third_party&#39;</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Example usage</span>
<span class="sd">            from pawnlib.config import change_propagate_setting, LoggerFactory</span>

<span class="sd">            # Create some loggers</span>
<span class="sd">            app_logger = LoggerFactory.create_app_logger(log_type=&#39;console&#39;, verbose=1, app_name=&#39;MyApp&#39;)</span>
<span class="sd">            pawn_logger = LoggerFactory.get_logger(&#39;pawnlib.utils&#39;, verbose=2)</span>
<span class="sd">            third_logger = LoggerFactory.get_logger(&#39;external.lib&#39;, verbose=1)</span>

<span class="sd">            # Change propagation for all loggers</span>
<span class="sd">            change_propagate_setting(propagate=False, propagate_scope=&#39;all&#39;, log_level=20)</span>
<span class="sd">            app_logger.info(&quot;No propagation&quot;)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # [INF] &lt;MyApp:XX&gt; No propagation</span>

<span class="sd">            # Change propagation for pawnlib loggers only</span>
<span class="sd">            change_propagate_setting(propagate=True, propagate_scope=&#39;pawnlib&#39;, pawnlib_level=10, third_party_level=30)</span>
<span class="sd">            pawn_logger.debug(&quot;Pawnlib debug with propagation&quot;)</span>
<span class="sd">            third_logger.debug(&quot;Third-party debug suppressed&quot;)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # [DBG] &lt;pawnlib.utils:XX&gt; Pawnlib debug with propagation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">valid_scopes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;pawnlib&#39;</span><span class="p">,</span> <span class="s1">&#39;third_party&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">propagate_scope</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid_scopes</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid propagate_scope: </span><span class="si">{</span><span class="n">propagate_scope</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">logger_name</span><span class="p">,</span> <span class="n">logger_instance</span> <span class="ow">in</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">loggerDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logger_instance</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">):</span>
            <span class="c1"># Propagate 설정</span>
            <span class="k">if</span> <span class="n">propagate_scope</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
                <span class="n">logger_instance</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="n">propagate</span>
                <span class="n">level</span> <span class="o">=</span> <span class="n">log_level</span>
            <span class="k">elif</span> <span class="n">propagate_scope</span> <span class="o">==</span> <span class="s1">&#39;pawnlib&#39;</span><span class="p">:</span>
                <span class="n">logger_instance</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="n">propagate</span> <span class="k">if</span> <span class="n">logger_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;pawnlib&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="ow">not</span> <span class="n">propagate</span>
                <span class="n">level</span> <span class="o">=</span> <span class="n">pawnlib_level</span> <span class="k">if</span> <span class="n">logger_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;pawnlib&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="n">third_party_level</span>
            <span class="k">elif</span> <span class="n">propagate_scope</span> <span class="o">==</span> <span class="s1">&#39;third_party&#39;</span><span class="p">:</span>
                <span class="n">logger_instance</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="n">propagate</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">logger_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;pawnlib&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="ow">not</span> <span class="n">propagate</span>
                <span class="n">level</span> <span class="o">=</span> <span class="n">third_party_level</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">logger_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;pawnlib&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="n">pawnlib_level</span>

            <span class="k">if</span> <span class="n">level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">logger_instance</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">logger_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;pawnlib&#39;</span><span class="p">):</span>
                    <span class="n">pawn</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;logger_name=</span><span class="si">{</span><span class="n">logger_instance</span><span class="si">}</span><span class="s2">, level=</span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">logger_instance</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
                    <span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span></div>


<span class="n">create_app_logger</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="n">create_app_logger</span>
<span class="c1"># setup_app_logger = LoggerFactory.create_app_logger</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, jinwoo.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>